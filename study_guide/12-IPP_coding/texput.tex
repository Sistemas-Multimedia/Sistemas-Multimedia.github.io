\input{../definitions}
\title{\SM{} - Study Guide - Milestone 12: IPP... coding in MRVC (Multi Resolution Video Codec)}

\maketitle

\section{Description}

\subsection{The IPP... decorrelation pattern}
It's time to put together all the ``tools'' that we have developed for
encoding a sequence of DWT decompositions (``decomp''s in
short). First, the sequence will be splitted into GODs (Group Of
Decomps), and the structure of each GOD will be IPP..., which means
that the first decomp of each GOD will be intra-coded (I-type), and
the rest of decomps of the GOF will be predicted-coded (P-type),
respect to the previous one\footnote{A P-type decomp except for the
second decomp.}. Notice that in a I-type decomp all the coefficients
will I-type coefficients (``coeffs'' in short), and in a P-type frame,
the different coefficients can be I-type or P-type.

\subsection{Multiresolution iterations}
In each IPP... iteration, only the high-frequency components of the
sequence of decoms are decorrelated ($[H]$ subbands) considering the
information provided by the low-frequency components ($[L]$ subbands),
which are losslessly\footnote{The $[L]$ information must be always
decoded with the quality that the encoder used for reconstruct the
corresponding SRL.} transmitted between the encoder and the decoder.

In order to increase the CR, a minimum number of IPP... iterations
should be carried out. In fact, the number of iterations controls the
number of SRLs (Spatial Resolution Levels) $N_{\text{SRL}}$ generated,
where
\begin{equation}
  N_{\text{SRL}} = \text{the number of IPP... iterations} + 1.
\end{equation}
The output of an IPP... iteration will be refered as ``a
spatial-layer of code-stream'', or simply as ``a S-layer''.

\subsection{Scalability}
It's easy to see that an IPP...-type MRVC sequence is progressive in
Spatial-resolution (S-progression) as long as more S-layers are
received. Moreover, Quality (Q-progression) scalability in each SRL
can be achieved in the encoding of the $[H]$ texture if a
quality-scalable image codec such as JPEG2000 is used, generating a
number $N_{\text{QL}}$ of quality-layers by each $[H]$
subband. Notice, however, that using this encoding configuration, the
only allowed\footnote{Suposing that the order of the layers could be
modified in the code-stream.} progression is the SQ-progression, that
can be Pythonically-described by
\begin{verbatim}
progression = []
for S_layer in range(N_SRL-1, 0, -1):
  for Q_layer in range(N_QL-1, 0, -1):
    progression.append((S_layer, Q_layer))
\end{verbatim}

For example, if $N_{\text{SRL}}=3$ (2 IPP...-type iterations) and
$N_{\text{QL}}=2$, the progression of layers would be:
\begin{verbatim}
progression = [
  (S_layer=2, Q_layer=1),  <-- The first one to be recived
  (S_layer=2, Q_layer=0),
  (S_layer=1, Q_layer=1),
  (S_layer=1, Q_layer=0),
  (S_layer=0, Q_layer=1),
  (S_layer_0, Q_layer=0) ] <-- The last one
\end{verbatim}
Notice that if the quality-scalable image compressor has been
configured as lossless for the quality-layer 0, this example
would be lossless when all the layers has been received.

\subsection{A block diagram of the codec}
\begin{figure}
  \centering
  \svg{graphics/codec}{1200}
  \caption{The IPP... MRCV video codec.}
  \label{fig:codec}
\end{figure}

The MRVC codec has been described in the Fig.~\ref{fig:codec}. The
equations that describe this system are:
\begin{equation}
  \{F_k.L, F_k.H\} = \text{DWT}(F_k),
  \tag{a}
\end{equation}
where $F_k$ is the $k$-th frame of the sequence.  Besides,
\begin{equation}
  [F_k.H] = \text{DWT}^{-1}(0, F_k.H),
  \tag{b}
\end{equation}
\begin{equation}
  Z^{-1}([F_k.L]) = [F_{k-1}.L],
  \tag{c}
\end{equation}
\begin{equation}
  Z^{-1}([F_k.L]) = [F_{k-1}.L],
  \tag{c}
\end{equation}


\begin{equation}
  [F_k.L] = \text{DWT}^{-1}(0, F_k.L),
  \tag(c)
\end{equation}
\begin{equation}
  [E_i.H] = \left\{
  \begin{array}{ll}
    [F_i.H] - [\hat{F}_i.H] & \text{(inter coded)} \\
    {[}F_i.H{]}                 & \text{(intra codec)}
  \end{array}
  \right.
\end{equation}

\section{What you have to do?}

Implement the previous codec, preferiblemente in a Jupyter notebook. 

\section{Timming}

Please, finish this notebook before the next class session.

\section{Deliverables}

None.

\section{Resources}

\bibliography{python}
