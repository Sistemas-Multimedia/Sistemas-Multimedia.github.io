<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" 
"http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd" > 
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title>Sistemas Multimedia - Study Guide - Milestone 5: Quantization in the RGB
Domain</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<!-- xhtml,mathml,html --> 
<meta name="src" content="index.tex" /> 
<link rel="stylesheet" type="text/css" href="index.css" /> 
</head><body 
>
   <div class="maketitle">
                                                                  

                                                                  
                                                                  

                                                                  

<h2 class="titleHead"><a 
href="https://sistemas-multimedia.github.io/" >Sistemas Multimedia</a> - Study Guide - Milestone
5: Quantization in the RGB Domain</h2>
 <div class="author" ><a 
href="https://cms.ual.es/UAL/personas/persona.htm?id=515256515553484875" ><span 
class="ecrm-1200">Vicente Gonz</span><span 
class="ecrm-1200">&#x00E1;</span><span 
class="ecrm-1200">lez Ruiz</span></a> <span 
class="ecrm-1200">- </span><a 
href="https://cms.ual.es/UAL/universidad/departamentos/informatica/index.htm" ><span 
class="ecrm-1200">Depto Inform</span><span 
class="ecrm-1200">&#x00E1;</span><span 
class="ecrm-1200">tica</span></a> <span 
class="ecrm-1200">- </span><a 
href="https://www.ual.es" ><span 
class="ecrm-1200">UAL</span></a></div><br />
<div class="date" ><span 
class="ecrm-1200">October 26, 2021</span></div>
   </div>
   <h3 class="likesectionHead"><a 
 id="x1-1000"></a>Contents</h3>
   <div class="tableofcontents">
   &#x00A0;<span class="sectionToc" >1 <a 
href="#x1-20001" id="QQ2-1-2">Description</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >1.1 <a 
href="#x1-30001.1" id="QQ2-1-3">Quantization in the RGB domain</a></span>
<br />   &#x00A0;<span class="sectionToc" >2 <a 
href="#x1-40002" id="QQ2-1-4">What do I have to do?</a></span>
<br />   &#x00A0;<span class="sectionToc" >3 <a 
href="#x1-50003" id="QQ2-1-5">Timming</a></span>
<br />   &#x00A0;<span class="sectionToc" >4 <a 
href="#x1-60004" id="QQ2-1-6">Deliverables</a></span>
<br />   &#x00A0;<span class="sectionToc" >5 <a 
href="#x1-70005" id="QQ2-1-7">Resources</a></span>
   </div>
<!--l. 8--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-20001"></a>Description</h3>
<!--l. 9--><p class="noindent" ><a 
href="https://en.wikipedia.org/wiki/Visual_system" >Humans</a> are quite e&#xFB03;cient recognizing the information stored in images &#x0028;and frames
of a video&#x0029;, even when this information has been degraded or partially lost.
<a 
href="https://en.wikipedia.org/wiki/Quantization_(signal_processing)" >Quantization</a>&#x00A0;<span class="cite">&#x005B;<a 
href="#Xsayood2017introduction">2</a>,&#x00A0;<a 
href="#Xvetterli2014foundations">4</a>&#x005D;</span> is a technique that can remove the part of the visual information
that is less relevant for us, and implies a <a 
href="https://en.wikipedia.org/wiki/Lossy_compression" >lossy coding</a>, which provides <a 
href="https://en.wikipedia.org/wiki/Data_compression_ratio" >compression
ratios</a> usually at least one order of magnitude higher than using <a 
href="https://en.wikipedia.org/wiki/Lossless_compression" >lossless
coding</a>.
</p><!--l. 22--><p class="indent" >   In this milestone we will quantize a frame in the
                                                                  

                                                                  
<a 
href="https://en.wikipedia.org/wiki/RGB_color_model" >RGB<span class="footnote-mark"><a 
href="index2.html#fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-2001f1"></a> 
color domain</a>. RGB is an additive color system, which means that all colors <span 
class="ecti-1000">start </span>with
black and are created by adding the primary colors&#x00A0;<span class="cite">&#x005B;<a 
href="#Xburger2016digital">1</a>&#x005D;</span>. A digital <a 
href="https://en.wikipedia.org/wiki/Quantization_(signal_processing)" ><span 
class="ecbx-1000">quantizer</span></a> &#x0028;typically
denoted by <!--l. 29--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Q</mtext></mstyle></math>&#x0029;
is an <a 
href="https://en.wikipedia.org/wiki/Data_compression" >encoding system</a> that inputs a sequence of &#x0028;digital&#x0029; samples
<!--l. 32--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="bold"><mi 
>x</mi></mstyle> <mo 
class="MathClass-rel">=</mo> <mo 
class="MathClass-open">&#x007B;</mo><msub><mrow 
><mstyle mathvariant="bold"><mi 
>x</mi></mstyle></mrow><mrow 
><mi 
>i</mi></mrow></msub 
><mo 
class="MathClass-close">&#x007D;</mo></math> and outputs a sequence
of quantization indexes <!--l. 33--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="bold"><mi 
>k</mi></mstyle></math>
&#x0028;see the Fig.&#x00A0;<a 
href="#x1-2004r1">1<!--tex4ht:ref: fig:Q --></a>&#x0029;. The inverse system, called a <span 
class="ecbx-1000">dequantizer </span>&#x0028;denoted by
<!--l. 34--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mstyle 
class="text"><mtext  >Q</mtext></mstyle></mrow><mrow 
><mo 
class="MathClass-bin">&#x2212;</mo><mn>1</mn></mrow></msup 
></math>&#x0029;, recovers an
approximate version of <!--l. 35--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="bold"><mi 
>x</mi></mstyle></math>
that we will denote by <!--l. 36--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mover 
accent="true"><mrow 
><mstyle mathvariant="bold"><mi 
>x</mi></mstyle></mrow><mo accent="true">&#x007E;</mo></mover></math>,
whose similitude with <!--l. 36--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="bold"><mi 
>x</mi></mstyle></math>
inversely depends on a frame quantization step &#x0028;QS&#x0029;
<!--l. 37--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>&#x0394;</mi></math>. Notice that
although <!--l. 38--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>&#x0394;</mi></math>
is an input parameter to the quantizer, it has not been considered in the &#xFB01;gure to
keep it simpler.
</p><!--l. 41--><p class="indent" >   We de&#xFB01;ne the quantization error<span class="footnote-mark"><a 
href="index3.html#fn2x0"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-2002f2"></a> 
</p><table class="equation"><tr><td> <a 
 id="x1-2003r1"></a>
<!--l. 43--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation"><msub><mrow 
>
                           <mstyle mathvariant="bold"><mi 
>e</mi></mstyle></mrow><mrow 
><mi 
>i</mi></mrow></msub 
> <mo 
class="MathClass-rel">=</mo><msub><mrow 
> <mstyle mathvariant="bold"><mi 
>x</mi></mstyle></mrow><mrow 
><mi 
>i</mi></mrow></msub 
> <mo 
class="MathClass-bin">&#x2212;</mo><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="bold"><mi 
>x</mi></mstyle></mrow><mo accent="true">&#x007E;</mo></mover></mrow><mrow 
><mi 
>i</mi></mrow></msub 
><mo 
class="MathClass-punc">,</mo>
</math></td><td class="eq-no">&#x0028;1&#x0029;</td></tr></table>
<!--l. 46--><p class="indent" >   that obviously, should be minimized in order to reduce the distortion generated
by the quantization.
</p>
   <hr class="figure" /><div class="figure" 
>
                                                                  

                                                                  
                                                                  

                                                                  
<!--l. 51--><p class="noindent" ><div style="text-align:center;"> <img width=300 src="graphics/Q.svg" /> </div>  <a 
 id="x1-2004r1"></a>
<a 
 id="x1-2005"></a>
<br />                                                                  </p><div class="caption" 
><span class="id">
Figure&#x00A0;1: </span><span  
class="content">Scalar quantization and dequantization of a signal.               </span></div><!--tex4ht:label?: x1-2004r1 -->
                                                                  

                                                                  
   </div><hr class="endfigure" />
<!--l. 56--><p class="indent" >   Quantizers can be classi&#xFB01;es into:
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-2007x1"><span 
class="ecbx-1000">Scalar quantizers</span>: those that produce a quantization index <!--l. 59--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="bold"><mi 
>k</mi></mstyle></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math>
     by each input sample <!--l. 59--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="bold"><mi 
>x</mi></mstyle></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math>.
     </li>
     <li 
  class="enumerate" id="x1-2009x2"><span 
class="ecbx-1000">Vector quantizers</span>: that process the input by blocks of samples, called
     vectors, producing a quantization index by vector, and usually, the length
     of the quantization index y much shorter than the length of the vector.
     Vector Quantization &#x0028;VQ&#x0029; can remove auto-correlation in the encoded
     signal  and  therefore,  is  more  e&#xFB03;cient  than  Scalar  Quantization  &#x0028;SQ&#x0029;.
     Unfortunately, the computational requirements of VQ are, by far, higher
     than the needed by SQ. If we also consider that there are other techniques
     &#x0028;such as transform coding&#x0029; that are able to decorrelate the samples with
     less computation than VQ, we can understand why SQ has been selected,
     for example, in most <a 
href="https://en.wikipedia.org/wiki/Image_compression" >image</a> and <a 
href="https://en.wikipedia.org/wiki/Video_coding_format" >video codecs</a>.</li></ol>
<!--l. 76--><p class="indent" >   Quantizers can also be classi&#xFB01;ed in:
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-2011x1"><span 
class="ecbx-1000">Uniform quantizers</span>: those in which <!--l. 78--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>&#x0394;</mi></math>
     is idependent on the amplitude of the samples.
     </li>
     <li 
  class="enumerate" id="x1-2013x2"><span 
class="ecbx-1000">Non-unifom quantizers</span>: on the contrary, when <!--l. 80--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>&#x0394;</mi></math>
     depends  &#x0028;directly  or  indirectly&#x0029;  on  the  amplitude  of  the  samples.  An
     example is a <a 
href="https://en.wikipedia.org/wiki/Companding" >companded quantizer</a>.</li></ol>
<!--l. 87--><p class="indent" >   Non-uniform quantizers can be:
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-2015x1"><span 
class="ecbx-1000">Static quantizers</span>: if <!--l. 89--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>&#x0394;</mi></math>
     is known <span 
class="ecti-1000">a priori</span>.
     </li>
     <li 
  class="enumerate" id="x1-2017x2"><span 
class="ecbx-1000">Adaptive quantizers</span>: when <!--l. 91--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>&#x0394;</mi></math>
     is adapted to minimize the quantization error, depending &#x201C;on-the-&#xFB02;y&#x201D; on
     the characteristics<span class="footnote-mark"><a 
href="index4.html#fn3x0"><sup class="textsuperscript">3</sup></a></span><a 
 id="x1-2018f3"></a> 
     of the signal.</li></ol>
<!--l. 98--><p class="indent" >   All quantizers can be classi&#xFB01;ed into:
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-2020x1"><span 
class="ecbx-1000">Mid-tread quantizers</span>, if <!--l. 100--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="bold"><mi 
>x</mi></mstyle></mrow><mo accent="true">&#x007E;</mo></mover></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math>
     can be <!--l. 100--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="bold"><mn>0</mn></mstyle></math>.
                                                                  

                                                                  
     </li>
     <li 
  class="enumerate" id="x1-2022x2"><span 
class="ecbx-1000">Mid-rised quantizers</span>, if <!--l. 101--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mover 
accent="true"><mrow 
><mstyle mathvariant="bold"><mi 
>x</mi></mstyle></mrow><mo accent="true">&#x007E;</mo></mover></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math>
     never is <!--l. 101--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="bold"><mn>0</mn></mstyle></math>,
     even if <!--l. 102--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="bold"><mi 
>x</mi></mstyle></mrow><mrow 
><mi 
>i</mi></mrow></msub 
> <mo 
class="MathClass-rel">=</mo> <mn>0</mn></math>.</li></ol>
<!--l. 105--><p class="indent" >   Finally, quantizers can be classi&#xFB01;ed as:
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-2024x1"><span 
class="ecbx-1000">Dead-zone quantizers</span>, that are characterized by a QS of length <!--l. 108--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>2</mn><mi 
>&#x0394;</mi></math>
     for <!--l. 108--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="bold"><mi 
>x</mi></mstyle></mrow><mrow 
><mi 
>i</mi></mrow></msub 
> <mo 
class="MathClass-rel">=</mo> <mn>0</mn></math>.
     Deadzone quantizers tends to remove the <a 
href="https://en.wikipedia.org/wiki/Noise_(electronics)" >electronic noise</a> &#x0028;that usually has
     an small amplitude compared to the input signal <!--l. 112--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="bold"><mi 
>x</mi></mstyle></math>&#x0029;.
     Notice that dead-zone quantizers should not be consdered uniform, and
     that all dead-zone quantizers, by de&#xFB01;nition, are mid-tread.
     </li>
     <li 
  class="enumerate" id="x1-2026x2"><span 
class="ecbx-1000">No dead-zone quantizers</span>, when the dead-zone does not exist.</li></ol>
   <hr class="figure" /><div class="figure" 
>
                                                                  

                                                                  
                                                                  

                                                                  
<!--l. 121--><p class="noindent" ><div style="text-align:center;"> <img width=500 src="iomap_mr.svg" /> </div>  <a 
 id="x1-2027r2"></a>
<a 
 id="x1-2028"></a>
<br />                                                                  </p><div class="caption" 
><span class="id">
Figure&#x00A0;2:    </span><span  
class="content">Input/output    mapping    of    a    mid-riser    quantizer    with
<!--l. 122--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>&#x0394;</mi> <mo 
class="MathClass-rel">=</mo> <mn>2</mn></math>.</span></div><!--tex4ht:label?: x1-2027r1 -->
                                                                  

                                                                  
   </div><hr class="endfigure" />
   <hr class="figure" /><div class="figure" 
>
                                                                  

                                                                  
                                                                  

                                                                  
<!--l. 128--><p class="noindent" ><div style="text-align:center;"> <img width=500 src="qe_mr.svg" /> </div>  <a 
 id="x1-2029r3"></a>
<a 
 id="x1-2030"></a>
<br />                                                                  </p><div class="caption" 
><span class="id">
Figure&#x00A0;3:     </span><span  
class="content">Quantization     error     of     a     mid-riser     quantizer     with
<!--l. 129--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>&#x0394;</mi> <mo 
class="MathClass-rel">=</mo> <mn>2</mn></math>.</span></div><!--tex4ht:label?: x1-2029r1 -->
                                                                  

                                                                  
   </div><hr class="endfigure" />
   <hr class="figure" /><div class="figure" 
>
                                                                  

                                                                  
                                                                  

                                                                  
<!--l. 135--><p class="noindent" ><div style="text-align:center;"> <img width=500 src="iomap_mt.svg" /> </div>  <a 
 id="x1-2031r4"></a>
<a 
 id="x1-2032"></a>
<br />                                                                  </p><div class="caption" 
><span class="id">
Figure&#x00A0;4:     </span><span  
class="content">Input/output     map     of     a     mid-tread     quantizer     with
<!--l. 136--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>&#x0394;</mi> <mo 
class="MathClass-rel">=</mo> <mn>2</mn></math>.</span></div><!--tex4ht:label?: x1-2031r1 -->
                                                                  

                                                                  
   </div><hr class="endfigure" />
   <hr class="figure" /><div class="figure" 
>
                                                                  

                                                                  
                                                                  

                                                                  
<!--l. 142--><p class="noindent" ><div style="text-align:center;"> <img width=500 src="qe_mt.svg" /> </div>  <a 
 id="x1-2033r5"></a>
<a 
 id="x1-2034"></a>
<br />                                                                  </p><div class="caption" 
><span class="id">
Figure&#x00A0;5:     </span><span  
class="content">Quantization     error     of     a     mid-tread     quantizer     with
<!--l. 143--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>&#x0394;</mi> <mo 
class="MathClass-rel">=</mo> <mn>2</mn></math>.</span></div><!--tex4ht:label?: x1-2033r1 -->
                                                                  

                                                                  
   </div><hr class="endfigure" />
   <hr class="figure" /><div class="figure" 
>
                                                                  

                                                                  
                                                                  

                                                                  
<!--l. 149--><p class="noindent" ><div style="text-align:center;"> <img width=500 src="iomap_dz.svg" /> </div>  <a 
 id="x1-2035r6"></a>
<a 
 id="x1-2036"></a>
<br />                                                                  </p><div class="caption" 
><span class="id">
Figure&#x00A0;6:     </span><span  
class="content">Input/output     map     of     a     dead-zone     quantizer     with
<!--l. 150--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>&#x0394;</mi> <mo 
class="MathClass-rel">=</mo> <mn>2</mn></math>.</span></div><!--tex4ht:label?: x1-2035r1 -->
                                                                  

                                                                  
   </div><hr class="endfigure" />
   <hr class="figure" /><div class="figure" 
>
                                                                  

                                                                  
                                                                  

                                                                  
<!--l. 156--><p class="noindent" ><div style="text-align:center;"> <img width=500 src="qe_dz.svg" /> </div>  <a 
 id="x1-2037r7"></a>
<a 
 id="x1-2038"></a>
<br />                                                                  </p><div class="caption" 
><span class="id">
Figure&#x00A0;7:     </span><span  
class="content">Quantization     error     of     a     dead-zone     quantizer     with
<!--l. 157--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>&#x0394;</mi> <mo 
class="MathClass-rel">=</mo> <mn>2</mn></math>.</span></div><!--tex4ht:label?: x1-2037r1 -->
                                                                  

                                                                  
   </div><hr class="endfigure" />
<!--l. 161--><p class="indent" >   Figs.&#x00A0;<a 
href="#x1-2027r2">2<!--tex4ht:ref: fig:iomap_mr --></a>, <a 
href="#x1-2029r3">3<!--tex4ht:ref: fig:qe_mr --></a>, <a 
href="#x1-2031r4">4<!--tex4ht:ref: fig:iomap_mt --></a>, <a 
href="#x1-2033r5">5<!--tex4ht:ref: fig:qe_mt --></a>, <a 
href="#x1-2035r6">6<!--tex4ht:ref: fig:iomap_dz --></a>, and <a 
href="#x1-2037r7">7<!--tex4ht:ref: fig:qe_dz --></a> describe the behaviour of 3 di&#xFB00;erent quantizers. Use this
<a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/05-RGB_quantization/digital_quantization.ipynb" >notebook</a> to gain more insights about quantization.
</p><!--l. 167--><p class="indent" >   Scalar quantization is an optimal solution only if the image colors are uniformly
distributed within <a 
href="https://en.wikipedia.org/wiki/RGB_color_model" >the RGB cube</a>. However, the typical color distribution in natural
images is anything but uniform, with some regions of the color space being densely
populated and many colors entirely missing. In this case, scalar quantization is not
optimal because the interesting colors may not be sampled with su&#xFB03;cient density
while at the same time colors are represented that do not appear in the image at
all&#x00A0;<span class="cite">&#x005B;<a 
href="#Xburger2016digital">1</a>&#x005D;</span>.
</p><!--l. 178--><p class="indent" >   On the other hand, vector quantization does not treat the individual color
components separately as does scalar quantization, but each color vector
<!--l. 181--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="bold"><mi 
>C</mi></mstyle></mrow><mrow 
><mi 
>i</mi></mrow></msub 
> <mo 
class="MathClass-rel">=</mo> <mo 
class="MathClass-open">&#x0028;</mo><msub><mrow 
><mstyle mathvariant="bold"><mi 
>R</mi></mstyle></mrow><mrow 
><mi 
>i</mi></mrow></msub 
><mo 
class="MathClass-punc">,</mo><msub><mrow 
><mstyle mathvariant="bold"><mi 
>G</mi></mstyle></mrow><mrow 
><mi 
>i</mi></mrow></msub 
><mo 
class="MathClass-punc">,</mo><msub><mrow 
><mstyle mathvariant="bold"><mi 
>B</mi></mstyle></mrow><mrow 
><mi 
>i</mi></mrow></msub 
><mo 
class="MathClass-close">&#x0029;</mo></math> or pixel
in the image is treated as a single entity. Starting from a set of original color tuples
<!--l. 183--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle mathvariant="bold"><mi 
>C</mi></mstyle> <mo 
class="MathClass-rel">=</mo> <mo 
class="MathClass-open">&#x007B;</mo><msub><mrow 
><mi 
>c</mi></mrow><mrow 
><mn>1</mn></mrow></msub 
><mo 
class="MathClass-punc">,</mo><msub><mrow 
><mi 
>c</mi></mrow><mrow 
><mn>2</mn></mrow></msub 
><mo 
class="MathClass-punc">,</mo><mi 
class="MathClass-op">&#x2026;</mi><mo> &ApplyFunction;<!--FUNCTION APPLICATION--></mo><mo 
class="MathClass-punc">,</mo><msub><mrow 
><mi 
>c</mi></mrow><mrow 
><mi 
>m</mi></mrow></msub 
><mo 
class="MathClass-close">&#x007D;</mo></math>, the
task of vector quantization is:
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-2040x1">to &#xFB01;nd a set of <!--l. 186--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>n</mi></math>
     representative color vectors <!--l. 187--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msup><mrow 
><mstyle mathvariant="bold"><mi 
>C</mi></mstyle></mrow><mrow 
><mi 
>&#x2032;</mi></mrow></msup 
> <mo 
class="MathClass-rel">=</mo> <mo 
class="MathClass-open">&#x007B;</mo><msubsup><mrow 
><mi 
>c</mi></mrow><mrow 
><mn>1</mn></mrow><mrow 
><mi 
>&#x2032;</mi></mrow></msubsup 
><mo 
class="MathClass-punc">,</mo><msubsup><mrow 
><mi 
>c</mi></mrow><mrow 
><mn>2</mn></mrow><mrow 
><mi 
>&#x2032;</mi></mrow></msubsup 
><mo 
class="MathClass-punc">,</mo><mi 
class="MathClass-op">&#x2026;</mi><mo> &ApplyFunction;<!--FUNCTION APPLICATION--></mo><mo 
class="MathClass-punc">,</mo><msubsup><mrow 
><mi 
>c</mi></mrow><mrow 
><mi 
>n</mi></mrow><mrow 
><mi 
>&#x2032;</mi></mrow></msubsup 
><mo 
class="MathClass-close">&#x007D;</mo></math>,
     and
     </li>
     <li 
  class="enumerate" id="x1-2042x2">to replace each original color <!--l. 188--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle mathvariant="bold"><mi 
>C</mi></mstyle></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math>
     by one of the new color vectors <!--l. 189--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msubsup><mrow 
><mstyle mathvariant="bold"><mi 
>C</mi></mstyle></mrow><mrow 
><mi 
>j</mi></mrow><mrow 
><mi 
>&#x2032;</mi></mrow></msubsup 
><mo 
class="MathClass-rel">&#x2208;</mo><msup><mrow 
><mstyle mathvariant="bold"><mi 
>C</mi></mstyle></mrow><mrow 
><mi 
>&#x2032;</mi></mrow></msup 
></math>,
     where <!--l. 189--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>n</mi></math>
     is usually predetermined &#x0028;<!--l. 190--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>n</mi> <mo 
class="MathClass-rel">&#x003C;</mo> <mi 
>m</mi></math>&#x0029;
     and  the  resulting  deviation  from  the  original  image  shall  be  minimal.
     This  is  a  combinatorial  optimization  problem  in  a  rather  large  search
     space, which usually makes it impossible to determine a global optimum
     in adequate time. This is the reason why VQ methods only compute a
     &#x201C;local&#x201D; optimum at best&#x00A0;<span class="cite">&#x005B;<a 
href="#Xburger2016digital">1</a>&#x005D;</span>.</li></ol>
<!--l. 198--><p class="indent" >   Another key aspect to take into consideration is that the problem previously
mentioned about the under-optimality when quantizing directly in the RGB domain
can be minimized when the values of each color component are decorrelated &#x0028;using
for example a spatial transform as we will see in a future milestone&#x0029;, requesting much
less computational resources than VQ.
</p>
   <h4 class="subsectionHead"><span class="titlemark">1.1   </span> <a 
 id="x1-30001.1"></a>Quantization in the RGB domain</h4>
<!--l. 206--><p class="noindent" >Supposing that we will use a static uniform dead-zone quantizer, a color RGB
image can be quantized, component &#x0028;<a 
href="https://en.wikipedia.org/wiki/Color_image" >channel</a>&#x0029; by component, using QSs
<!--l. 209--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >R</mtext></mstyle></mrow></msub 
></math>,
<!--l. 209--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >G</mtext></mstyle></mrow></msub 
></math>, and
<!--l. 210--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >B</mtext></mstyle></mrow></msub 
></math>.
                                                                  

                                                                  
A reasonable question that arises here is: given a target bit-rate
<!--l. 211--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>R</mi></math> for
the compressed frame, how the QSs should be chosen to minimize the distortion? At
this point we can consider two di&#xFB00;erent optimization perspectives. In the &#xFB01;rst one, we
consider strictly visual considerations, and obviously, any alternative di&#xFB00;erent from </p><table class="equation"><tr><td>
<a 
 id="x1-3001r2"></a>
<!--l. 216--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                          <msub><mrow 
><mi 
>&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >R</mtext></mstyle></mrow></msub 
> <mo 
class="MathClass-rel">=</mo> <msub><mrow 
><mi 
>&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >G</mtext></mstyle></mrow></msub 
> <mo 
class="MathClass-rel">=</mo> <msub><mrow 
><mi 
>&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >B</mtext></mstyle></mrow></msub 
>
</math></td><td class="eq-no">&#x0028;2&#x0029;</td></tr></table>
<!--l. 220--><p class="indent" >   will produce some alteration in the color &#x0028;also called the &#x201C;chroma&#x201D;&#x0029; of the
reconstructed frame.
</p><!--l. 223--><p class="indent" >   In the second one, only a pure <a 
href="https://en.wikipedia.org/wiki/Rate-distortion_theory" >Rate/Distortion &#x0028;RD&#x0029; performance</a> is considered.
From a RD perspective, the best combination of QSs is those that optimizes &#x0028;makes
closer to the origin of coordinates&#x0029; the RD curve. A RD curve expresses the
distortion &#x0028;typically the <a 
href="https://en.wikipedia.org/wiki/Root-mean-square_deviation" >Root Mean Square Error &#x0028;RMSE&#x0029;</a>&#x0029; as a function of the
bit-rate. In the case of encoding a RGB image, we have 3 RD curves, one for each
component. Thus, for example, the RD curve for the red channel measures, for
di&#xFB00;erent QSs, the distortion &#x0028;comparing with the original RGB image&#x0029; of
reconstructing only the red channel as a function of the bit-rate generated for the
corresponding QS.
</p>
   <hr class="figure" /><div class="figure" 
>
                                                                  

                                                                  
                                                                  

                                                                  
<!--l. 239--><p class="noindent" ><div style="text-align:center;"> <img width=300 src="graphics/RD_slopes.svg" /> </div>  <a 
 id="x1-3002r8"></a>
<a 
 id="x1-3003"></a>
<br />                                                                  </p><div class="caption" 
><span class="id">
Figure&#x00A0;8: </span><span  
class="content">Two RD curves with di&#xFB00;erent shape.                           </span></div><!--tex4ht:label?: x1-3002r1 -->
                                                                  

                                                                  
   </div><hr class="endfigure" />
<!--l. 244--><p class="indent" >   Normal RD curves are convex &#x0028;see Fig.&#x00A0;<a 
href="#x1-3002r8">8<!--tex4ht:ref: fig:RD_slopes --></a>&#x0029;, which means that if
<!--l. 245--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>&#x03BB;</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
></math> is the slope of the curve
measured at the <!--l. 246--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>i</mi></math>-th
point of the curve &#x0028;starting at the lowest bit-rate&#x0029;, it always hold that </p><table class="equation"><tr><td> <a 
 id="x1-3004r3"></a>
<!--l. 248--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                             <msub><mrow 
><mi 
>&#x03BB;</mi></mrow><mrow 
><mi 
>i</mi></mrow></msub 
> <mo 
class="MathClass-rel">&#x003E;</mo> <msub><mrow 
><mi 
>&#x03BB;</mi></mrow><mrow 
><mi 
>i</mi><mo 
class="MathClass-bin">+</mo><mn>1</mn></mrow></msub 
><mo 
class="MathClass-punc">.</mo>
</math></td><td class="eq-no">&#x0028;3&#x0029;</td></tr></table>
<!--l. 251--><p class="indent" >   where <!--l. 251--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>&#x03BB;</mi></math>
quanti&#xFB01;es the trade-o&#xFB00; between decreasing the distortion &#x0028;the slopes are always
negative&#x0029; while the bit-rate increases. The higher the slope, the higher the bene&#xFB01;t. If
we suppose now that the contribution to the quality of each channel is additive, that
is </p><table class="equation"><tr><td> <a 
 id="x1-3005r4"></a>
<!--l. 255--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                       <mi 
>D</mi> <mo 
class="MathClass-rel">=</mo> <msub><mrow 
><mi 
>D</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >R</mtext></mstyle></mrow></msub 
> <mo 
class="MathClass-bin">+</mo> <msub><mrow 
><mi 
>D</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >G</mtext></mstyle></mrow></msub 
> <mo 
class="MathClass-bin">+</mo> <msub><mrow 
><mi 
>D</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >B</mtext></mstyle></mrow></msub 
><mo 
class="MathClass-punc">,</mo>
</math></td><td class="eq-no">&#x0028;4&#x0029;</td></tr></table>
<!--l. 258--><p class="indent" >   where <!--l. 258--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>D</mi></math>
denotes distortion, then the optimal QSs must satisfy that&#x00A0;<span class="cite">&#x005B;<a 
href="#Xvetterli1995wavelets">3</a>,&#x00A0;<a 
href="#Xsayood2017introduction">2</a>&#x005D;</span> </p><table class="equation"><tr><td> <a 
 id="x1-3006r5"></a>
                                                                  

                                                                  
<!--l. 260--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                          <msub><mrow 
><mi 
>&#x03BB;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >R</mtext></mstyle></mrow></msub 
> <mo 
class="MathClass-rel">=</mo> <msub><mrow 
><mi 
>&#x03BB;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >G</mtext></mstyle></mrow></msub 
> <mo 
class="MathClass-rel">=</mo> <msub><mrow 
><mi 
>&#x03BB;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >B</mtext></mstyle></mrow></msub 
><mo 
class="MathClass-punc">.</mo>
</math></td><td class="eq-no">&#x0028;5&#x0029;</td></tr></table>
<!--l. 265--><p class="indent" >   To see this, lets suppose that we have used, for example, a set of QSs so that
<!--l. 266--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>&#x03BB;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >R</mtext></mstyle></mrow></msub 
><mo 
class="MathClass-bin">&#x2215;</mo><mn>2</mn> <mo 
class="MathClass-rel">=</mo> <msub><mrow 
><mi 
>&#x03BB;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >G</mtext></mstyle></mrow></msub 
> <mo 
class="MathClass-rel">=</mo> <msub><mrow 
><mi 
>&#x03BB;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >B</mtext></mstyle></mrow></msub 
><mo 
class="MathClass-punc">,</mo></math> and
that we still have room for spending more bits to encode the frame. In this
situation, the maximum bene&#xFB01;t would be obtained if and only if we decrease
<!--l. 269--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mi 
>&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >R</mtext></mstyle></mrow></msub 
></math>,
because the slope for the red channel doubles the slope of the other curves.
Therefore, the optimal QSs are obtained when Eq.&#x00A0;<a 
href="#x1-3006r5">5<!--tex4ht:ref: eq:optimal_quantization --></a> is true. This can be seen in this
<a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/05-RGB_quantization/RGB_quantization.ipynb" >notebook</a>.
</p>
   <h3 class="sectionHead"><span class="titlemark">2   </span> <a 
 id="x1-40002"></a>What do I have to do?</h3>
<!--l. 295--><p class="noindent" >
     </p><ol  class="enumerate1" >
     <li 
  class="enumerate" id="x1-4002x1">Please, using this <a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/05-RGB_quantization/RGB_quantization.ipynb" >notebook</a> try to &#xFB01;nd a QSs con&#xFB01;guration where Eq.&#x00A0;<a 
href="#x1-3001r2">2<!--tex4ht:ref: eq:simple_Q --></a>
     is not optimal &#x0028;or at least there is a di&#xFB00;erent con&#xFB01;guration of QSs better
     that this equation&#x0029;.
     </li>
     <li 
  class="enumerate" id="x1-4004x2">Do you think that our lifes would be easier, to compress a RGB image, if we
     had an gray-image &#x0028;lossy&#x0029; compressor that allows to select the quantization
     step by its slope?</li></ol>
<!--l. 322--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">3   </span> <a 
 id="x1-50003"></a>Timming</h3>
<!--l. 324--><p class="noindent" >Please, &#xFB01;nish this milestone before the next class session.
</p><!--l. 326--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">4   </span> <a 
 id="x1-60004"></a>Deliverables</h3>
<!--l. 328--><p class="noindent" >None.
                                                                  

                                                                  
</p><!--l. 330--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">5   </span> <a 
 id="x1-70005"></a>Resources</h3>
   <div class="thebibliography">
   <p class="bibitem" ><span class="biblabel">
 &#x005B;1&#x005D;<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xburger2016digital"></a>W.&#x00A0;Burger and M.J. Burge.  <a 
href="https://educons.edu.rs/wp-content/uploads/2020/05/2016-Digital-Image-Processing.pdf" ><span 
class="ecti-1000">Digital Image Processing: An Algorithmic</span>
   <span 
class="ecti-1000">Introduction Using Java</span></a>. Springer, 2016.
   </p>
   <p class="bibitem" ><span class="biblabel">
 &#x005B;2&#x005D;<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xsayood2017introduction"></a>K.&#x00A0;Sayood.   <a 
href="http://rahilshaikh.weebly.com/uploads/1/1/6/3/11635894/data_compression.pdf" ><span 
class="ecti-1000">Introduction to Data Compression</span></a>.   Morgan  Kaufmann,
   2017.
   </p>
   <p class="bibitem" ><span class="biblabel">
 &#x005B;3&#x005D;<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xvetterli1995wavelets"></a>M.&#x00A0;Vetterli  and  J.&#x00A0;Kova&#x010D;evi&#x0107;.     <a 
href="http://waveletsandsubbandcoding.org/Repository/VetterliKovacevic95_Manuscript.pdf" ><span 
class="ecti-1000">Wavelets  and  Subband  Coding</span></a>.
   Prentice-hall, 1995.
   </p>
   <p class="bibitem" ><span class="biblabel">
 &#x005B;4&#x005D;<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xvetterli2014foundations"></a>M.&#x00A0;Vetterli, J.&#x00A0;Kova&#x010D;evi&#x0107;, and V.K. Goyal.  <a 
href="http://www.fourierandwavelets.org/FSP_v1.1_2014.pdf" ><span 
class="ecti-1000">Foundations of Signal</span>
   <span 
class="ecti-1000">Processing</span></a>. Cambridge University Press, 2014.
</p>
   </div>
    
</body></html> 

                                                                  


