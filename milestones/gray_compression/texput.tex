% Emacs, this is -*-latex-*-

\input{../../definitions}
\title{Lossy Compression of Gray-scale Images}

\maketitle
\tableofcontents

\section{Description}
%{{{

Gray-Scale (GS) images only have one (color) channel, at it is usually
represented in color displays using gray color tones (the same amount
if red, green and blue components). In most of the cases, the number
of bits per pixel (the depth of the image) is 8, but it is not rare to
use up to 16 bits/pixel~\cite{burger2016digital}. However, it is quite
difficult to find a color display with more than 256 gray colors.

In this milestone we will see how to
\href{https://vicente-gonzalez-ruiz.github.io/quantization/}{quantize}
the image, and then compression the image with PNG, to create a
\href{https://en.wikipedia.org/wiki/Lossy_compression}{lossy image
  compressor}.

\subsection{Scalar and vector quantization of GS images}
%{{{

The compression ratio of our lossy image compressor can be controled
by means of quantization. At this point we have basically two
alternatives:
\begin{enumerate}
\item \textbf{Scalar Quantization (SQ)}: each pixel is quantized
  without considering the rest.
\item \textbf{Vector Quantization (VQ)}: the pixels are quantized
  block-by-block (2D vectors).
\end{enumerate}
Notice that VQ exploits the spatial correlation, but not SQ. For this
reason, we will use PNG after SQ. In the case of VQ, only the
statistical redundancy remains, that can be exploited with Arithmetic
Coding, for example.

%}}}

\subsection{Bit-rate control}
%{{{

The bit-rate (the number of bits/pixel) obtained after using
quantization + PNG depends on:
\begin{enumerate}
\item The capability of PNG for removing spatial redudancy, aspect
  that we cannot control with accuracy (only some levels of
  compression are usually available and the bit-rates are quite
  similar).
\item The quantization step $\Delta$ used. The higher the $\Delta$,
  the higher the compression ratio, the lower the number of
  bits/pixel, the lower the quality of the reconstructed image.
\end{enumerate}
Variying $\Delta$ we should be able to generate a Rate/Distortion (RD)
curve, where the X-axis represents the bit-rate (in bit/pixe, for
example) and the Y-axis represents the distortion (the
\href{https://en.wikipedia.org/wiki/Root-mean-square_deviation}{Root
  Mean Square Error (RMSE)}, for example).

Normal RD curves are convex (see Fig.~\ref{fig:RD_slopes}), which
means that if $\lambda_i$ is the slope of the curve measured at the
$i$-th point of the curve (starting at the lowest bit-rate), it
usually hold that
\begin{equation}
  \lambda_i > \lambda_{i+1}.
\end{equation}
where $\lambda$ quantifies the trade-off between decreasing the
distortion\footnote{For this reason, the slopes are negative.} while
the bit-rate
increases.~\cite{vetterli1995wavelets,sayood2017introduction}

%}}}

%}}}

\section{What do I have to do?}
%{{{

\begin{enumerate}
\item Please, using this
  \href{https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/05-RGB_compression/RGB_compression.ipynb}{notebook}
  try to find a quantization steps combination where
  Eq.~\ref{eq:simple_Q} is not optimal (or at least there is a
  different configuration of QSs better that this equation).
\item Do you think that our lifes would be easier, to compress a RGB
  image, if we had an gray-image (lossy) compressor that allows to
  select the quantization step by its slope?
\end{enumerate}
%\begin{enumerate}
%\item Please, modify this
%  \href{https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/05-quantization/performance.ipynb}{notebook}
%  in order to use the
%  \href{https://docs.opencv.org/master/d4/da8/group__imgcodecs.html}{TIFF
%    and JPEG 2000 image formats} instead of PNG. Compare the RD
%  curves.
%\item In the previous
%  \href{https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/05-quantization/performance.ipynb}{notebook}
%  the three color channels, R, G, and B has been quantized using the
%  same QS ($\Delta_{\text{R}} = \Delta_{\text{G}} =
%  \Delta_{\text{B}}$). Do you think that this strategy minimizes the
%  quantization error?
%\item Compare the estimation provided by the entropy with the
%  DEFLATE's bit-rates.
%\end{enumerate}

%}}}

\section{Timming}

Please, finish this milestone before the next class session.

\section{Deliverables}

None.

\section{Resources}

\renewcommand{\addcontentsline}[3]{} % Remove functionality of \addcontentsline
\bibliography{data-compression,signal-processing,DWT,image-processing}
