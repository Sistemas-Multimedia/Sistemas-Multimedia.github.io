% Emacs, this is -*-latex-*-

\input{../../definitions}
\title{\SM{} - Study Guide - The 1D-DCT (1-Dimensional Discrete Cosine Transform) transform applied over the color domain}

\maketitle

\tableofcontents

\section{Description}

\subsection{Components correlation}
%{{{

Usually, some part of the data in an image is
\href{https://en.wikipedia.org/wiki/Data_redundancy}{redundant} (can
be removed without loss of information). In the case of a color image
in the RGB domain, the three components of each pixel (each one
measuring the energy in a different band of the
\href{https://en.wikipedia.org/wiki/Visible_spectrum}{visible
  spectrum}) can be
\href{https://en.wikipedia.org/wiki/Correlation_and_dependence}{correlated}.
\href{https://vicente-gonzalez-ruiz.github.io/transform_coding/}{Transform
  coding} applied between the color components can concentrate the
information (energy) of the image in a small set of coefficients, that
after quantization and/or entropy coding, can be compressed more
efficiently.\footnote{For example, if the energy of a color subband is
low, quantization could completely makes zero such subband, but the
reconstruction of the image would be reasonable. The most part of
entropy codecs reach higher compression ratios with sequences of
zeros.} This
\href{https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/06-YUV_compression/color_redundancy.ipynb}{notebook}
quantifies the redundancy related to the color domain.

\begin{comment}
To estimate the
\href{https://en.wikipedia.org/wiki/Redundancy_(information_theory)}{redundancy}
we have basically two options:
\begin{enumerate}
\item Compute the
  \href{https://en.wikipedia.org/wiki/Entropy_(information_theory)}{0-order
    (memoryless source) entropy} of the signal: the higher the
  entropy, the lower the redudancy. In fact, if we suppose that the
  samples of the signal are uncorrelated, the 0-order entropy is an
  exact measure of the expected bit-rate achieved by an
  \href{https://en.wikipedia.org/wiki/Arithmetic_coding}{arithmetic
    encoder} (the most efficient entropy compressor). Unfortunately,
  the 0-order entropy is usually only a estimation of the redundancy,
  i.e., lower bit-rates can be achieved in practice after using a high-order
  decorrelation.
\item A better way is to use an
  \href{https://en.wikipedia.org/wiki/Data_compression}{lossless
    compressor}: the higher the length of the compressed file compared
  to the length of the original file, the lower the
  redundancy.\footnote{If the length of the compressed file is equal or
  larger than the length of the original file, then, for the compressor
  that we are using, there is not redundancy in the original
  representation.} Notice, however, that although this estimation is
  more accurate than the 0-order entropy, in general, it depends on the
  compressor (different algoritms can provide different
  estimations).
\end{enumerate}
\end{comment}

%}}}

\subsection{$\text{RGB}$ color space}
%{{{

The color of a pixel depends on the
\href{https://en.wikipedia.org/wiki/Visible_spectrum}{frequency of the
  light that the pixel captures}. Such information can be represented
in a number of different encoding systems known as
\href{https://en.wikipedia.org/wiki/Color_space}{color spaces}. Among
all those systems, the RGB color space is the most used because it can
be obtained directly from the light signal using color
filters.\footnote{Specifically, a red filter, a green filter and a
blue filter.}

The RGB color model has evident physical advantages, but in general is
quite redundant. In this milestone we will analyze:
%}}}

\subsection{Color-DCT}
%{{{

The \href{https://en.wikipedia.org/wiki/Discrete_cosine_transform}{DCT
  (Discrete Cosine Transform)} is an
\href{https://en.wikipedia.org/wiki/Orthonormality}{orthonormal}
\href{https://vicente-gonzalez-ruiz.github.io/transform_coding/}{transform}. When
applied to the RGB color domain, we will move from this domain to the
color-DCT domain that have also 3 components, that we will denote by
DCT$_0$, DCT$_1$ and DCT$_2$. If the decorrelation is effective, most
of the energy is concentrated in DCT$_0$, which represents the
average energy of the image.

The forward $3$-DCT (the DCT applied to a vector of $3$ elements) is
defined by
\begin{equation}
  \begin{bmatrix}
    \text{DCT}_0 \\
    \text{DCT}_1 \\
    \text{DCT}_2
  \end{bmatrix}
  =
  \begin{bmatrix}
    0.57735027 & 0.70710678 & 0.40824829 \\
    0.57735027 & 0.0 & -0.81649658 \\
    0.57735027 & -0.70710678 & 0.40824829
  \end{bmatrix}
  \begin{bmatrix}
    \text{R} \\
    \text{G} \\
    \text{B}
  \end{bmatrix},
\end{equation}
and the inverse transform by
\begin{equation}
  \begin{bmatrix}
    \text{R} \\
    \text{G} \\
    \text{B}
  \end{bmatrix}
  =
  \begin{bmatrix}
    0.57735027 & 0.57735027 & 0.57735027 \\
    0.70710678 & 0.0 & -0.70710678 \\
    0.40824829 & -0.81649658 & 0.40824829
  \end{bmatrix}
  \begin{bmatrix}
    \text{DCT}_0 \\
    \text{DCT}_1 \\
    \text{DCT}_2
  \end{bmatrix}.
\end{equation}
See this
\href{https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/06-YUV_compression/color-DCT_matrix.ipynb}{notebook}
to see how to compute the filter's coefficients. Notice also that the
DCT is orthonormal, and therefore, the matrix of the forward transform
is the transpose of the matrix of the backward
transform~\cite{sayood2017introduction}. This also means that the
contribucion of the synthesis filters to the reconstructed signal are
independent and have exactly the unity gain\footnote{To find the gains (of any 1D transform) we can compute the
energy of the signal generated by the inverse transform of the impulse
discrete 1D signal
\begin{equation}
  \delta_{i}(x) = 
  \left\{
  \begin{array}{ll}
    1 & \text{if $i=x$}\\
    0 & \text{otherwise},
  \end{array}
  \right.
\end{equation}
where the
\href{https://en.wikipedia.org/wiki/Energy_(signal_processing)}{energy
  of a discrete signal} ${\mathbf s}$ is defined as
\begin{equation}
  \langle {\mathbf s}, {\mathbf s} \rangle =  \sum_{i}{{\mathbf s}_i^2}.
\end{equation}
}

\section{What do I have to do?}

\begin{enumerate}
\item Please, run the previous
  \href{https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/study_guide/06-color_transform/performance.ipynb}{notebook}
  to learn some insights about the problem of the optimal
  quantization in the color domain.
\item Include in the previous
  \href{https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/study_guide/06-color_transform/performance.ipynb}{notebook}
  an implementation of the
  \href{https://en.wikipedia.org/wiki/JPEG_2000#Color_components_transformation}{RCT
    (Reversible Color Transform)} and compare it's RD performance with
  the other transforms.
\item Implement the transform described in Eq.~\ref{eq:optimal}, and
  compare it with the other transforms.
\end{enumerate}

\subsection{Rate-control}
%{{{
When the transform is orthogonal, the quantization step of a subband should be inversely proportional to the subband gain.  
%}}}

\section{Timming}

Please, finish this milestone before the next class session.

\section{Deliverables}

None.

\section{Resources}

\renewcommand{\addcontentsline}[3]{}% Remove functionality of \addcontentsline
\bibliography{maths,data-compression,signal-processing,DWT,image-compression,image-processing}
