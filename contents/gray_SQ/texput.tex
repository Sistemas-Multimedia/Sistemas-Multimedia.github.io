% Emacs, this is -*-latex-*-

\input{../../definitions}
\title{\SM{} - Scalar Quantization of Gray-scale Images}

\maketitle
\tableofcontents

\section{Objective}
This task shows how to implement a very simple
\href{https://en.wikipedia.org/wiki/Lossy_compression}{lossy
  (gray-scale) image compressor}~\cite{vruiz__image_IO} based on
Scalar
Quantization~\cite{vruiz__scalar_quantization,sayood2017introduction,vetterli2014foundations}
and PNG~\cite{vruiz__PNG}. This compressor basically removes the
number of different gray tones in the image (normally,
\href{https://en.wikipedia.org/wiki/Visual_system}{humans} hardly
distinguish more than 64 different colors). Therefore, the only source
of ``redundancy'' exploited is the visual redundancy.

\section{Scalar quantization applied to the ``intensity'' domain}
The notetooks
\href{https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/contents/gray_SQ/gray_SQ_deadzone.ipynb}{gray\_SQ\_deadzone.ipynb},
\href{https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/contents/gray_SQ/gray_SQ_LloydMax.ipynb}{gray\_SQ\_LloydMax.ipynb},
\href{https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/contents/gray_SQ/gray_SQ_companded.ipynb}{gray\_SQ\_companded.ipynb},
\href{https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/contents/gray_SQ/gray_SQ_midrise.ipynb}{gray\_SQ\_midrise.ipynb},
\href{https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/contents/gray_SQ/gray_SQ_midtread.ipynb}{gray\_SQ\_midtread.ipynb}
and
\href{https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/contents/gray_SQ/compare_quantizers.ipynb}{compare\_quantizers.ipynb})
shows the performance of different scalar quantizers using the
quantization step sizes~\cite{vruiz__scalar_quantization}
$\Delta\in\{128, 64, 32, 16, 8, 4, 2, 1\}$\footnote{There are two
reasons for having selected such steps: (1) all of them are powers of
$2$, simulating a
\href{https://en.wikipedia.org/wiki/Bit_plane}{bit-plane} encoding
(this can be interesting to compare with codecs that compresses the
data by bit-planes), and (2) when the number of bit-planes is small,
and we use steps that are not powers of two, the RD curves can have
points for bit-rates $i$ and $i+1$ where the condition
$\lambda_i\ge\lambda_{i+1}$ (being $\lambda_i$ the slope of the RD
curve at the bit-rate $i$) is not satisfied, which difficults the
bit-rate control.} Notice that, since the quantization step sizes are
predetermined, no rate or distortion
control~\cite{vruiz__information_theory} has been incorporated into
the compressor.\footnote{When a codec provides RD control, in general
this implies that we are able to select the output bit-rate and/or the
output quality.}

\section{What do I have to do?}
\begin{enumerate}
\item \textbf{Implement a RD control:} Create a new notebook named
  ``bit-rate\_control.ipynb'' that, given a maximum bit-rate
  $R^\text{max}$, finds the quantization step $\Delta^*$ that
  minimizes the distortion. Use the
  quantizer~\cite{vruiz__scalar_quantization} that your prefer.
\end{enumerate}

\section{Timming}
Please, finish this milestone before the next class session.

\section{Deliverables}
None.

\section{Resources}
\renewcommand{\addcontentsline}[3]{} % Remove functionality of \addcontentsline
\bibliography{data-compression,signal-processing,DWT,image-processing,quantization,information_theory,image-formats}

%%%%%%%%%%%

\begin{comment}
\section{Distortion control}
We do not provide any accurate distortion control algorithm. Our
compressor is able to control the number of gray tones in the
reconstructed image, using a deadzone scalar quantizer. The
quantization steps are selected simulating a
\href{https://en.wikipedia.org/wiki/Bit_plane}{bit-plane}
encoding. Therefore, for 8-bit images, the quantization steps are
$\Delta\in\{128, 64, 32, 16, 8, 4, 2, 1\}$ (powers of $2$). Notice
that we cannot control the distortion in terms of the RMSE, for
example.

\section{Rate control}
The bit-rate (the number of bits/pixel) obtained after using
scalar quantization quantization and PNG depends on:
\begin{enumerate}
\item The number of output indexes generated by the quantizer.
\item The capability of PNG for removing spatial/statistical
  redudancy, aspect that we cannot control with accuracy (only some
  levels of compression are usually available).
\item In the case of SQ, the quantization step size $\Delta$
  used. Notice that, usually, the higher the $\Delta$, the higher the
  compression ratio, the lower the number of bits/pixel, and the lower
  the quality of the reconstructed image.
\end{enumerate}

Therefore, variying $\Delta$ we should be able to generate a Rate/Distortion (RD)
curve~\cite{vruiz__information_theory}, where the $x$-axis represents the bit-rate (in bit/pixel, for
example) and the $y$-axis represents the distortion (the
\href{https://en.wikipedia.org/wiki/Root-mean-square_deviation}{Root
  Mean Square Error (RMSE)}, for example). However, notice that only seven RD points will be available\footnote{This is a direct consequence of using bit-plane encoding.}, and the rate of each point is not controllable.\footnote{Because we cannot control the bit-rate with PNG.}
\end{comment}
