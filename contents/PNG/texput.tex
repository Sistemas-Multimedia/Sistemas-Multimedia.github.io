% Emacs, this is -*-latex-*-

\input{../../definitions}

\title{\SM{} - Entropy coding with
  \href{https://vicente-gonzalez-ruiz.github.io/PNG/}{PNG} (Portable
  Network Graphics)}

\maketitle

\tableofcontents

\section{Description}

This task introduces
\href{https://vicente-gonzalez-ruiz.github.io/PNG/}{PNG}, a
\href{https://en.wikipedia.org/wiki/Lossless_compression}{lossless
  image compression format} used in this course for representing
\href{https://en.wikipedia.org/wiki/Digital_data}{digital}
\href{https://en.wikipedia.org/wiki/Digital_image}{images} and
\href{https://en.wikipedia.org/wiki/Video}{videos}. Basically, a
(\href{https://en.wikipedia.org/wiki/Raster_graphics}{raster}) video
is a \href{https://en.wikipedia.org/wiki/Sequence}{sequence} of
\href{https://en.wikipedia.org/wiki/Image}{images} (usually called
\href{https://en.wikipedia.org/wiki/Film_frame}{frames}, or
\href{https://en.wikipedia.org/wiki/Group_of_pictures}{pictures} in
the context of video).

An image can be described as a
\href{https://en.wikipedia.org/wiki/Matrix_(mathematics)}{matrix} of
\href{https://en.wikipedia.org/wiki/Pixel}{pixels} (PIcture X-ray
ELementS), arranged in a regular 2D grid. Such sequences are
usully captured by a
\href{https://en.wikipedia.org/wiki/Charge-coupled_device}{CCD (Charge
  Coupled Device)}. In maths, an image can be denoted by
\begin{equation}
  {\mathbf I} = \{\{{\mathbf I}_{y,x}\}\in\mathbb{P}^{k}, (y,x)\in\mathbb{N}^2\},
  \label{eq:image}
\end{equation}
where $(y,x)$ is a spatial coordinate\footnote{Notice that we follow
the ``first row, then column'' notation to express the
coordinates. This is also used in NumPy~\cite{harris2020array}, for
example.}, and $\mathbb{P}^{k}$ represents the (pixels) \emph{values
domain}, with dimension (number of pixel components)
$k$~\cite{burger2016digital}.

In a similar way, a sequence of frames can be denoted by
\begin{equation}
  {\mathbf V} = \{{\mathbf V}_{t,y,x}\in\mathbb{P}^{k}, (t,y,x)\in\mathbb{N}^3\} = \{{\mathbf I}_t\},
  \label{eq:video}
\end{equation}
where $t$ represents time, and ${\mathbf I}$ is an image such
as the described in Eq.~\eqref{eq:image}.

Depending on $k$, we can have grayscale pixels ($k=1$), color pixels
($k=3$), and multispectral pixels ($k>3$).\footnote{When $k>3$ we also
use the term ``(super/hyper)-spectral'' pixels/frames/sequences, depending
on the value of $k$.} Finally, if we take into consideration the
number of bits/component that usually is $8$ (although this value can be larger
specially for grayscale frames), the pixel-depth will be $8$
bits/pixel for grayscale sequences and $3\times 8=24$ bits/pixel for
color ones.

In our experiments, we are going to store a video as a sequence of
\href{https://en.wikipedia.org/wiki/Computer_file}{files} with names
{\tt <prefix>000.png}, {\tt <prefix>001.png}, ..., where {\tt <prefix>} specifies the
sequence name and ``{\tt .png}'' indicates that the frames are coded using
\href{https://en.wikipedia.org/wiki/Portable_Network_Graphics}{PNG}
(pronounced ``ping'') image compression
format~\cite{roelofs1999png,world2003portable}. PNG uses
\href{https://en.wikipedia.org/wiki/Differential_pulse-code_modulation}{DPCM}
and the \href{https://en.wikipedia.org/wiki/DEFLATE}{DEFLATE}
\href{https://en.wikipedia.org/wiki/Entropy_coding}{entropy codec}
(\href{https://en.wikipedia.org/wiki/Huffman_coding}{Huffman coding} +
\href{https://en.wikipedia.org/wiki/Lempel-Ziv-Storer-Szymanski}{LZSS})~\cite{nelson96datacompression}
to remove\footnote{The amount of redundancy removed depends on several factors (such as the configuration of the DEFLATE parameters and the information stored in the image) resulting in an unpredictable output bit-rate.} the
\href{https://en.wikipedia.org/wiki/Image_compression}{spatial} and
\href{https://en.wikipedia.org/wiki/Data_compression}{statistical
  redudancy}. Notice that no
\href{https://en.wikipedia.org/wiki/YUV}{color transform} is
used.

% We will use \href{https://vicente-gonzalez-ruiz.github.io/PNG/}{PNG}
% basically as an
% \href{https://en.wikipedia.org/wiki/Entropy_encoding}{entropy codec},
% which is a combination of
% \href{https://vicente-gonzalez-ruiz.github.io/Huffman_coding/}{Huffman
%   Coding} and
% \href{https://vicente-gonzalez-ruiz.github.io/LZ77/}{Lempel-Ziv-77
%   Coding}. However, notice that any other lossless image compressing
% file format (such as \href{https://en.wikipedia.org/wiki/TIFF}{TIFF})
% could be used.

Finally, notice that all the frames of a sequence usually:
\begin{enumerate}
\item Have the same
  \href{https://en.wikipedia.org/wiki/Image_resolution}{spatial
    resolution}.
\item Are, at least originally, represented in the
  \href{https://en.wikipedia.org/wiki/RGB_color_model}{RGB domain}.
\item Depending on the frame, in PNG, each color component (channel) has a
  \href{https://en.wikipedia.org/wiki/Glossary_of_computer_graphics#bit_depth}{bit
    depth} of $8$ or $16$ bits, representing an unsigned
  \href{https://en.wikipedia.org/wiki/Integer_(computer_science)}{integer}.
%\item The pixel
%  \href{https://en.wikipedia.org/wiki/Luminous_intensity}{intensities}
%  are displaced to the center of the
%  \href{https://en.wikipedia.org/wiki/Range_(computer_programming)}{range
%    of values} ([0, 65535]) that the components can take (for example,
%  in \href{https://en.wikipedia.org/wiki/Disk_storage}{disk}, the
%  component intensity 0 is represented by 32768).
\end{enumerate}
  
\section{What do I have to do?}

\begin{enumerate}
%\item Download \theproject{}, preferably cloning your own fork.
\item Run this \href{https://jupyter.org/}{jupyter}
  \href{https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/contents/PNG/display_video.ipynb}{notebook}
  that shows how to read and write PNG frames.
%\item Please, try to dig a little bit into the insights of the notebook.
%\item Understand the insights of the notebook.
\end{enumerate}

\section{Timming}

Please, finish this task before the next class session.

\section{Deliverables}

None.

\section{Resources}

\renewcommand{\addcontentsline}[3]{}% Remove functionality of \addcontentsline
\bibliography{python,image-processing,image-compression,text-compression}
