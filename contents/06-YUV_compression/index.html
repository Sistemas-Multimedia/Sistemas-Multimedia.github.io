<?xml version="1.0" encoding="iso-8859-1" ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0//EN" 
"http://www.w3.org/Math/DTD/mathml2/xhtml-math11-f.dtd" > 
<html xmlns="http://www.w3.org/1999/xhtml"  
> 
<head><title>Sistemas Multimedia - Study Guide - Milestone 6: Compression in uncorrelated
color domains</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
<meta name="generator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<meta name="originator" content="TeX4ht (https://tug.org/tex4ht/)" /> 
<!-- xhtml,mathml,html --> 
<meta name="src" content="index.tex" /> 
<link rel="stylesheet" type="text/css" href="index.css" /> 
</head><body 
>
   <div class="maketitle">
                                                                  

                                                                  
                                                                  

                                                                  

<h2 class="titleHead"><a 
href="https://sistemas-multimedia.github.io/" >Sistemas Multimedia</a> - Study Guide - Milestone
6: Compression in uncorrelated color domains</h2>
 <div class="author" ><a 
href="https://cms.ual.es/UAL/personas/persona.htm?id=515256515553484875" ><span 
class="ecrm-1200">Vicente Gonz</span><span 
class="ecrm-1200">&#x00E1;</span><span 
class="ecrm-1200">lez Ruiz</span></a> <span 
class="ecrm-1200">- </span><a 
href="https://cms.ual.es/UAL/universidad/departamentos/informatica/index.htm" ><span 
class="ecrm-1200">Depto Inform</span><span 
class="ecrm-1200">&#x00E1;</span><span 
class="ecrm-1200">tica</span></a> <span 
class="ecrm-1200">- </span><a 
href="https://www.ual.es" ><span 
class="ecrm-1200">UAL</span></a></div><br />
<div class="date" ><span 
class="ecrm-1200">December 4, 2022</span></div>
   </div>
   <h3 class="likesectionHead"><a 
 id="x1-1000"></a>Contents</h3>
   <div class="tableofcontents">
   &#x00A0;<span class="sectionToc" >1 <a 
href="#x1-20001" id="QQ2-1-2">Description</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >1.1 <a 
href="#x1-30001.1" id="QQ2-1-3">Rate-control</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >1.2 <a 
href="#x1-40001.2" id="QQ2-1-4">Components correlation</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >1.3 <a 
href="#x1-50001.3" id="QQ2-1-5">Color spaces</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >1.4 <a 
href="#x1-60001.4" id="QQ2-1-7">The <!--l. 8--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >RGB</mtext></mstyle> <mo 
class="MathClass-rel">&#x21D4;</mo><mstyle 
class="text"><mtext  >DCT</mtext></mstyle></math>
transform</a></span>
<br />   &#x00A0;<span class="sectionToc" >2 <a 
href="#x1-70002" id="QQ2-1-8">Quantization in the color-DCT domain</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.1 <a 
href="#x1-80002.1" id="QQ2-1-9">The <!--l. 10--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >RGB</mtext></mstyle> <mo 
class="MathClass-rel">&#x21D4;</mo><mstyle 
class="text"><mtext  >YCrCb</mtext></mstyle></math>
transform</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" >2.1.1 <a 
href="#x1-90002.1.1" id="QQ2-1-10">Quantization in the YCrCb domain</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >2.2 <a 
href="#x1-100002.2" id="QQ2-1-11">The <!--l. 12--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >RGB</mtext></mstyle> <mo 
class="MathClass-rel">&#x21D4;</mo><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math>
transform</a></span>
<br />   &#x00A0;&#x00A0;&#x00A0;<span class="subsubsectionToc" >2.2.1 <a 
href="#x1-110002.2.1" id="QQ2-1-12">Quantization in the YCoCg domain</a></span>
<br />   &#x00A0;<span class="sectionToc" >3 <a 
href="#x1-120003" id="QQ2-1-13">What do I have to do?</a></span>
<br />   &#x00A0;&#x00A0;<span class="subsectionToc" >3.1 <a 
href="#x1-130003.1" id="QQ2-1-14">Rate-control</a></span>
<br />   &#x00A0;<span class="sectionToc" >4 <a 
href="#x1-140004" id="QQ2-1-15">Timming</a></span>
<br />   &#x00A0;<span class="sectionToc" >5 <a 
href="#x1-150005" id="QQ2-1-16">Deliverables</a></span>
<br />   &#x00A0;<span class="sectionToc" >6 <a 
href="#x1-160006" id="QQ2-1-17">Resources</a></span>
   </div>
                                                                  

                                                                  
<!--l. 10--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-20001"></a>Description</h3>
<!--l. 12--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">1.1   </span> <a 
 id="x1-30001.1"></a>Rate-control</h4>
<!--l. 14--><p class="noindent" >When the transform is orthogonal, the quantization step of a subband should be
inversely proportional to the subband gain.
</p><!--l. 17--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">1.2   </span> <a 
 id="x1-40001.2"></a>Components correlation</h4>
<!--l. 20--><p class="noindent" >Usually, some part of the data in an image is <a 
href="https://en.wikipedia.org/wiki/Data_redundancy" >redundant</a> &#x0028;can be removed without loss
of information&#x0029;. In the case of a color image in the RGB domain, the three
components of each pixel &#x0028;each one measuring the energy in a di&#xFB00;erent band of the
<a 
href="https://en.wikipedia.org/wiki/Visible_spectrum" >visible spectrum</a>&#x0029; can be <a 
href="https://en.wikipedia.org/wiki/Correlation_and_dependence" >correlated</a>. <a 
href="https://vicente-gonzalez-ruiz.github.io/transform_coding/" >Transform coding</a> applied between the color
compoents can concentrate the information &#x0028;energy&#x0029; of the image in a small set of
coe&#xFB03;cients, that after quantization and entropy coding, can be compressed more
e&#xFB03;ciently.<span class="footnote-mark"><a 
href="index2.html#fn1x0"><sup class="textsuperscript">1</sup></a></span><a 
 id="x1-4001f1"></a> 
This <a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/06-YUV_compression/color_redundancy.ipynb" >notebook</a> quanti&#xFB01;es the redundancy related to the color domain.
</p>
   <h4 class="subsectionHead"><span class="titlemark">1.3   </span> <a 
 id="x1-50001.3"></a>Color spaces</h4>
<!--l. 75--><p class="noindent" >The color of a pixel depends on the <a 
href="https://en.wikipedia.org/wiki/Visible_spectrum" >frequency of the light that the pixel captures</a>.
Such information can be represented in a number of di&#xFB00;erent encoding systems
known as <a 
href="https://en.wikipedia.org/wiki/Color_space" >color spaces</a>. Among all those systems, the RGB color space is the most
used because it can be obtained directly from the light signal using color
&#xFB01;lters.<span class="footnote-mark"><a 
href="index3.html#fn2x0"><sup class="textsuperscript">2</sup></a></span><a 
 id="x1-5001f2"></a> 
</p><!--l. 85--><p class="indent" >   The RGB color model has evident physical advantages, but in general is quite
redundant. In this milestone we will analyze:
     </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-5003x1">
                                                                  

                                                                  
     <!--l. 88--><p class="noindent" >the <a 
href="https://en.wikipedia.org/wiki/Discrete_cosine_transform" >DCT &#x0028;Discrete Cosine Transform&#x0029;</a> applied to the color domain, i.e.,
     the color-DCT space,
     </p></li>
<li 
  class="enumerate" id="x1-5005x2">
     <!--l. 92--><p class="noindent" >the <a 
href="https://en.wikipedia.org/wiki/YCbCr" ><!--l. 92--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCrCb</mtext></mstyle></math></a>
     space, and
     </p></li>
<li 
  class="enumerate" id="x1-5007x3">
     <!--l. 93--><p class="noindent" >the <a 
href="https://en.wikipedia.org/wiki/YCoCg" ><!--l. 93--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math></a>
     space,</p></li></ol>
<!--l. 95--><p class="noindent" >that are more e&#xFB03;cient from a coding perspective. Besides,
<!--l. 96--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCrCb</mtext></mstyle></math> and
<!--l. 96--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math> color spaces, which are
<span 
class="ecti-1000">luma</span>-based &#x0028;luminance-based<span class="footnote-mark"><a 
href="index4.html#fn3x0"><sup class="textsuperscript">3</sup></a></span><a 
 id="x1-5008f3"></a> 
color domains, rely on the idea of separating the luminance coe&#xFB03;cients
&#x0028;Y&#x0029; from two <span 
class="ecti-1000">chroma </span>coe&#xFB03;cients &#x0028;red and blue in the case of
<!--l. 101--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCrCb</mtext></mstyle></math>, orange and green
in the case of <!--l. 101--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math>&#x0029;.
These transformations have two main advantages&#x00A0;<span class="cite">&#x005B;<a 
href="#Xburger2016digital">1</a>&#x005D;</span>:
     </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-5010x1">
     <!--l. 104--><p class="noindent" >Compatibility with legacy black and white systems is maintained while
     at the same time the bandwidth of the signal can be optimized by using
     di&#xFB00;erent transmission bandwidths for the brightness and the chroma components.<span class="footnote-mark"><a 
href="index5.html#fn4x0"><sup class="textsuperscript">4</sup></a></span><a 
 id="x1-5011f4"></a> 
     </p></li>
<li 
  class="enumerate" id="x1-5013x2">
     <!--l. 109--><p class="noindent" >Since  the  <a 
href="https://en.wikipedia.org/wiki/Visual_system" >HVS  &#x0028;Human  Visual  System&#x0029;</a>  is  not  able  to  perceive  detail
     in the chrominance as well as it does in the luminance, the amount of
     information, and consequently <a 
href="https://en.wikipedia.org/wiki/Sampling_(signal_processing)" >sampling rate</a>, used in the chrominance
     can be generally reduced to 1/4 of the used for the luminance without
     a noticeable distortion &#x0028;see Fig.&#x00A0;<a 
href="#x1-5014r1">1<!--tex4ht:ref: fig:san-diego_chroma_subsampled --></a>&#x0029;. This <a 
href="https://en.wikipedia.org/wiki/Bandwidth_(computing)" >fact is used when compressing</a>
     digital still images and is one of the reason why, for example, the <a 
href="https://en.wikipedia.org/wiki/JPEG" >JPEG</a>
     image compressor converts RGB images to <!--l. 121--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCrCb</mtext></mstyle></math>.</p></li></ol>
                                                                  

                                                                  
   <hr class="figure" /><div class="figure" 
>
                                                                  

                                                                  
                                                                  

                                                                  
<!--l. 126--><p class="noindent" ><div style="text-align:center;"> <img width=1000 src="san-diego_chroma_subsampled.png" /> </div>  <a 
 id="x1-5014r1"></a>
<a 
 id="x1-5015"></a>
<br />                                                                  </p><div class="caption" 
><span class="id">
Figure&#x00A0;1: </span><span  
class="content">Visual e&#xFB00;ect of chroma subsamplig in the YCrCb domain. See this
<a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/06-YUV_compression/chroma_subsampling.ipynb" >notebook</a>.                                                          </span></div><!--tex4ht:label?: x1-5014r1 -->
                                                                  

                                                                  
   </div><hr class="endfigure" />
   <h4 class="subsectionHead"><span class="titlemark">1.4   </span> <a 
 id="x1-60001.4"></a>The <!--l. 135--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >RGB</mtext></mstyle> <mo 
class="MathClass-rel">&#x21D4;</mo><mstyle 
class="text"><mtext  >DCT</mtext></mstyle></math>
transform</h4>
<!--l. 137--><p class="noindent" >The 3x3-<a 
href="https://en.wikipedia.org/wiki/Discrete_cosine_transform" >DCT</a> orthonormal forward <a 
href="https://vicente-gonzalez-ruiz.github.io/transform_coding/" >transform</a> is de&#xFB01;ned by
</p>
   <table class="equation"><tr><td>
<!--l. 143--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-6001r1"  class="label" ></mstyle><!--endlabel--><mo 
class="MathClass-open" stretchy="false"> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >DCT0</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >DCT1</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >DCT2</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable></mo>                                                         </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-rel">=</mo>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center"> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>5</mn><mn>7</mn><mn>7</mn><mn>3</mn><mn>5</mn><mn>0</mn><mn>2</mn><mn>7</mn> </mtd><mtd 
class="array"  columnalign="center">   <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>7</mn><mn>0</mn><mn>7</mn><mn>1</mn><mn>0</mn><mn>6</mn><mn>7</mn><mn>8</mn>   </mtd><mtd 
class="array"  columnalign="center">   <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>4</mn><mn>0</mn><mn>8</mn><mn>2</mn><mn>4</mn><mn>8</mn><mn>2</mn><mn>9</mn>   </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>5</mn><mn>7</mn><mn>7</mn><mn>3</mn><mn>5</mn><mn>0</mn><mn>2</mn><mn>7</mn> </mtd> <mtd 
class="array"  columnalign="center"> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>0</mn> </mtd> <mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>8</mn><mn>1</mn><mn>6</mn><mn>4</mn><mn>9</mn><mn>6</mn><mn>5</mn><mn>8</mn></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center"> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>5</mn><mn>7</mn><mn>7</mn><mn>3</mn><mn>5</mn><mn>0</mn><mn>2</mn><mn>7</mn> </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>7</mn><mn>0</mn><mn>7</mn><mn>1</mn><mn>0</mn><mn>6</mn><mn>7</mn><mn>8</mn> </mtd><mtd 
class="array"  columnalign="center">   <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>4</mn><mn>0</mn><mn>8</mn><mn>2</mn><mn>4</mn><mn>8</mn><mn>2</mn><mn>9</mn>   </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                            </mrow><mo fence="true" form="postfix">]</mo></mrow> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >R</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >G</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >B</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                               </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-punc">,</mo>
</math></td><td class="eq-no">&#x0028;1&#x0029;</td></tr></table>
<!--l. 161--><p class="indent" >   and the inverse transform by </p><table class="equation"><tr><td>
<!--l. 162--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-6002r2"  class="label" ></mstyle><!--endlabel--><mo 
class="MathClass-open" stretchy="false"> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >R</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >G</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >B</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable></mo>                                                            </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-rel">=</mo>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center"> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>5</mn><mn>7</mn><mn>7</mn><mn>3</mn><mn>5</mn><mn>0</mn><mn>2</mn><mn>7</mn> </mtd><mtd 
class="array"  columnalign="center">   <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>5</mn><mn>7</mn><mn>7</mn><mn>3</mn><mn>5</mn><mn>0</mn><mn>2</mn><mn>7</mn>   </mtd><mtd 
class="array"  columnalign="center">   <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>5</mn><mn>7</mn><mn>7</mn><mn>3</mn><mn>5</mn><mn>0</mn><mn>2</mn><mn>7</mn>   </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>7</mn><mn>0</mn><mn>7</mn><mn>1</mn><mn>0</mn><mn>6</mn><mn>7</mn><mn>8</mn> </mtd> <mtd 
class="array"  columnalign="center"> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>0</mn> </mtd> <mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>7</mn><mn>0</mn><mn>7</mn><mn>1</mn><mn>0</mn><mn>6</mn><mn>7</mn><mn>8</mn></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center"> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>4</mn><mn>0</mn><mn>8</mn><mn>2</mn><mn>4</mn><mn>8</mn><mn>2</mn><mn>9</mn> </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>8</mn><mn>1</mn><mn>6</mn><mn>4</mn><mn>9</mn><mn>6</mn><mn>5</mn><mn>8</mn> </mtd><mtd 
class="array"  columnalign="center">   <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>4</mn><mn>0</mn><mn>8</mn><mn>2</mn><mn>4</mn><mn>8</mn><mn>2</mn><mn>9</mn>   </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                            </mrow><mo fence="true" form="postfix">]</mo></mrow> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >DCT0</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >DCT1</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >DCT2</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                         </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-punc">.</mo>
</math></td><td class="eq-no">&#x0028;2&#x0029;</td></tr></table>
<!--l. 180--><p class="indent" >   See this <a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/06-YUV_compression/color-DCT_matrix.ipynb" >notebook</a> to see how to compute the &#xFB01;lter&#x2019;s coe&#xFB03;cients. Notice also that
the DCT is <a 
href="https://vicente-gonzalez-ruiz.github.io/transform_coding/" >orthonormal</a>, and therefore, the matrix of the forward transform is the
transpose of the matrix of the backward transform&#x00A0;<span class="cite">&#x005B;<a 
href="#Xsayood2017introduction">3</a>&#x005D;</span>.
</p><!--l. 219--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">2   </span> <a 
 id="x1-70002"></a>Quantization in the color-DCT domain</h3>
<!--l. 220--><p class="noindent" >The synthesis &#xFB01;lters of orthonormal transforms are orthogonal &#x0028;their contributions
to the reconstructed signal are independent&#x0029; and have exactly the unity
                                                                  

                                                                  
gain.<span class="footnote-mark"><a 
href="index6.html#fn5x0"><sup class="textsuperscript">5</sup></a></span><a 
 id="x1-7001f5"></a> 
Therefore, without considering that the entropy coding stage can performs better for
some subbands, the optimal quantization pattern should be </p><table class="equation"><tr><td>
<!--l. 227--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                     <mstyle 
   id="x1-7002r3"  class="label" ></mstyle><!--endlabel--><msub><mrow 
><mi mathvariant="normal">&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >DCT0</mtext></mstyle></mrow></msub 
> <mo 
class="MathClass-rel">=</mo><msub><mrow 
> <mi mathvariant="normal">&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >DCT1</mtext></mstyle></mrow></msub 
> <mo 
class="MathClass-rel">=</mo><msub><mrow 
> <mi mathvariant="normal">&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >DCT2</mtext></mstyle></mrow></msub 
><mo 
class="MathClass-punc">.</mo>
</math></td><td class="eq-no">&#x0028;3&#x0029;</td></tr></table>
<!--l. 230--><p class="indent" >   See this <a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/study_guide/06-color_transform/color-DCT_compression.ipynb" >notebook</a>.
</p><!--l. 234--><p class="indent" >   Notice that to &#xFB01;nd the gains &#x0028;of any 1D transform&#x0029; we can compute the energy of
the signal generated by the inverse transform of the impulse discrete 1D signal
</p><table class="equation"><tr><td>
<!--l. 237--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-7003r4"  class="label" ></mstyle><!--endlabel--><msub><mrow 
><mo 
class="MathClass-open" stretchy="false">&#x03B4;</mo></mrow><mrow 
><mi 
>i</mi></mrow></msub 
><mo 
class="MathClass-open" stretchy="false">&#x0028;</mo><mi 
>x</mi><mo 
class="MathClass-close" stretchy="false">&#x0029;</mo> <mo 
class="MathClass-rel">=</mo> <mrow><mo fence="true" form="prefix"> {</mo><mrow> <mtable  align="axis" style=""  
equalrows="false" columnlines="none" equalcolumns="false" class="array"> <mtr><mtd 
class="array"  columnalign="left">  <mn>1</mn> </mtd><mtd 
class="array"  columnalign="left">  <mstyle 
class="text"><mtext  >if&#x00A0;</mtext><mstyle 
class="math"><mi 
>i</mi> <mo 
class="MathClass-rel">=</mo> <mi 
>x</mi></mstyle><mtext  ></mtext></mstyle>    </mtd></mtr>  <mtr><mtd 
class="array"  columnalign="left">  <mn>0</mn> </mtd> <mtd 
class="array"  columnalign="left">  <mstyle 
class="text"><mtext  >otherwise</mtext></mstyle> <mo 
class="MathClass-punc">,</mo></mtd></mtr> <!--ll--></mtable>                                                                     </mrow><mo fence="true" form="postfix"></mo></mrow>
</math></td><td class="eq-no">&#x0028;4&#x0029;</td></tr></table>
<!--l. 246--><p class="indent" >   where the <a 
href="https://en.wikipedia.org/wiki/Energy_(signal_processing)" >energy of a discrete signal</a>
<!--l. 248--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>x</mi></math> is
de&#xFB01;ned as </p><table class="equation"><tr><td>
                                                                  

                                                                  
<!--l. 249--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                          <mstyle 
   id="x1-7004r5"  class="label" ></mstyle><!--endlabel--><mo 
class="MathClass-open" stretchy="false">&#x27E8;</mo><mi 
>x</mi><mo 
class="MathClass-punc">,</mo><mi 
>x</mi><mo 
class="MathClass-close" stretchy="false">&#x27E9;</mo> <mo 
class="MathClass-rel">=</mo><munder class="msub"><mrow 
><mo  
> &#x2211;</mo>
   </mrow><mrow 
><mi 
>i</mi></mrow></munder 
><msubsup><mrow 
><mi 
>x</mi></mrow><mrow 
><mi 
>i</mi></mrow><mrow 
><mn>2</mn></mrow></msubsup 
><mo 
class="MathClass-punc">.</mo>
</math></td><td class="eq-no">&#x0028;5&#x0029;</td></tr></table>
<!--l. 253--><p class="indent" >   If we consider that the RD curve can be a&#xFB00;eced by the compresiblity of the
subbands, a better solution to &#xFB01;nd the optimal RD curve is:
     </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-7006x1">
     <!--l. 255--><p class="noindent" >Variying the <!--l. 255--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi mathvariant="normal">&#x0394;</mi></math>,
     compute the RD curve for each DCT subband.
     </p></li>
<li 
  class="enumerate" id="x1-7008x2">
     <!--l. 257--><p class="noindent" >Sort the RD points &#x0028;considering the three subbands at once&#x0029;, by their
     slope.
     </p></li>
<li 
  class="enumerate" id="x1-7010x3">
     <!--l. 259--><p class="noindent" >Apply progressively the combinations of quantization steps described by
     the sorted RD points.</p></li></ol>
<!--l. 262--><p class="noindent" >Notice that this algorithm is right because the DCT is orthogonal, i.e., the
contributions of the subbands to the reconstructe signal are independent. See this
<a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/study_guide/06-color_transform/color-DCT_compression.ipynb" >notebook</a>.
</p>
   <h4 class="subsectionHead"><span class="titlemark">2.1   </span> <a 
 id="x1-80002.1"></a>The <!--l. 270--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >RGB</mtext></mstyle> <mo 
class="MathClass-rel">&#x21D4;</mo><mstyle 
class="text"><mtext  >YCrCb</mtext></mstyle></math>
transform</h4>
<!--l. 272--><p class="noindent" >To convert a &#x0028;color&#x0029; pixel from the <!--l. 272--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >RGB</mtext></mstyle></math>
domain into the <a 
href="https://en.wikipedia.org/wiki/YCbCr" ><!--l. 273--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCrCb</mtext></mstyle></math></a> color
domain, we use the <!--l. 274--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >RGB/YCrCb</mtext></mstyle></math>
&#x0028;analysis&#x0029; transform&#x00A0;<span class="cite">&#x005B;<a 
href="#Xmalvar2008lifting">2</a>&#x005D;</span> </p><table class="equation"><tr><td>
                                                                  

                                                                  
<!--l. 279--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-8001r6"  class="label" ></mstyle><!--endlabel--><mo 
class="MathClass-open" stretchy="false"> <mtable  align="axis" style=""  
equalrows="false" columnlines="none none" equalcolumns="false" class="array"> <mtr><mtd 
class="array"  columnalign="left">  <mstyle 
class="text"><mtext  >Y</mtext></mstyle>   </mtd><mtd 
class="array"  columnalign="center">  = </mtd><mtd 
class="array"  columnalign="left"> 0.299<mstyle 
class="text"><mtext  >R</mtext></mstyle> + 0.587<mstyle 
class="text"><mtext  >G</mtext></mstyle> + 0.114<mstyle 
class="text"><mtext  >B</mtext></mstyle>  </mtd>
</mtr>  <mtr><mtd 
class="array"  columnalign="left">  <mstyle 
class="text"><mtext  >Cr</mtext></mstyle>  </mtd><mtd 
class="array"  columnalign="center">  = </mtd><mtd 
class="array"  columnalign="left"> 0.713&#x0028;<mstyle 
class="text"><mtext  >R</mtext></mstyle> &#x2212;<mstyle 
class="text"><mtext  >Y</mtext></mstyle>&#x0029; + &#x03B4;            </mtd>
</mtr>  <mtr><mtd 
class="array"  columnalign="left"> <mstyle 
class="text"><mtext  >Cb</mtext></mstyle>  </mtd><mtd 
class="array"  columnalign="center">  = </mtd><mtd 
class="array"  columnalign="left"> 0.564&#x0028;<mstyle 
class="text"><mtext  >B</mtext></mstyle> &#x2212;<mstyle 
class="text"><mtext  >Y</mtext></mstyle>&#x0029; + &#x03B4;,           </mtd></mtr><!--lcl--></mtable></mo>
</math></td><td class="eq-no">&#x0028;6&#x0029;</td></tr></table>
<!--l. 287--><p class="indent" >   where, </p><table class="equation"><tr><td>
<!--l. 288--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-8002r7"  class="label" ></mstyle><!--endlabel--><mo 
class="MathClass-open" stretchy="false">&#x03B4;</mo> <mo 
class="MathClass-rel">=</mo> <mrow><mo fence="true" form="prefix"> {</mo><mrow> <mtable  align="axis" style=""  
equalrows="false" columnlines="none" equalcolumns="false" class="array"> <mtr><mtd 
class="array"  columnalign="left">  <mn>1</mn><mn>2</mn><mn>8</mn>     </mtd><mtd 
class="array"  columnalign="left">  <mstyle 
class="text"><mtext  >for&#x00A0;8&#x00A0;bits&#x00A0;&#x0028;unsigned&#x0029;&#x00A0;images</mtext></mstyle><mo 
class="MathClass-punc">,</mo>     </mtd>
</mtr>  <mtr><mtd 
class="array"  columnalign="left"> <mn>3</mn><mn>2</mn><mn>7</mn><mn>6</mn><mn>8</mn> </mtd><mtd 
class="array"  columnalign="left">  <mstyle 
class="text"><mtext  >for&#x00A0;16&#x00A0;bits&#x00A0;&#x0028;unsigned&#x0029;&#x00A0;images</mtext></mstyle><mo 
class="MathClass-punc">,</mo>   </mtd>
</mtr>  <mtr><mtd 
class="array"  columnalign="left"> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>5</mn>     </mtd><mtd 
class="array"  columnalign="left">  <mstyle 
class="text"><mtext  >for&#x00A0;&#xFB02;oating&#x00A0;point&#x00A0;&#x0028;</mtext></mstyle><mo 
class="MathClass-open" stretchy="false">&#x005B;</mo><mn>0</mn><mo 
class="MathClass-punc">,</mo><mn>1</mn><mo 
class="MathClass-close" stretchy="false">&#x005D;</mo><mstyle 
class="text"><mtext  >&#x0029;&#x00A0;images</mtext></mstyle>  </mtd></mtr> <!--ll--></mtable>                                               </mrow><mo fence="true" form="postfix"></mo></mrow>
</math></td><td class="eq-no">&#x0028;7&#x0029;</td></tr></table>
<!--l. 297--><p class="indent" >   is used to avoid negative coe&#xFB03;cients. As it can be seen,
<!--l. 297--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Cr</mtext></mstyle></math> and
<!--l. 298--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Cb</mtext></mstyle></math> are scaled
versions of <!--l. 298--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >R</mtext></mstyle> <mo 
class="MathClass-bin">&#x2212;</mo><mstyle 
class="text"><mtext  >Y</mtext></mstyle></math>
and <!--l. 299--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >B</mtext></mstyle> <mo 
class="MathClass-bin">&#x2212;</mo><mstyle 
class="text"><mtext  >Y</mtext></mstyle></math>,
so <!--l. 299--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Cr</mtext></mstyle></math>
and <!--l. 299--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Cb</mtext></mstyle></math>
can be interpreted as measures of how much red and blue content in
a pixel di&#xFB00;ers from luma, respectively. Notice also that for a gray pixel,
<!--l. 302--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >R</mtext></mstyle> <mo 
class="MathClass-rel">=</mo> <mstyle 
class="text"><mtext  >G</mtext></mstyle> <mo 
class="MathClass-rel">=</mo> <mstyle 
class="text"><mtext  >B</mtext></mstyle> <mo 
class="MathClass-rel">=</mo> <mstyle 
class="text"><mtext  >Y</mtext></mstyle></math>, and so
<!--l. 303--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Cr</mtext></mstyle> <mo 
class="MathClass-rel">=</mo> <mstyle 
class="text"><mtext  >Cb</mtext></mstyle> <mo 
class="MathClass-rel">=</mo> <mn>0</mn></math>&#x00A0;<span class="cite">&#x005B;<a 
href="#Xmalvar2008lifting">2</a>&#x005D;</span>.
where <!--l. 326--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Y</mtext></mstyle></math> is the
luma and <!--l. 326--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >CrCb</mtext></mstyle></math>
are the chromas. The main reason for such mapping is that the HVS is much less
sensitive to the high-frequency information in the chromas&#x00A0;<span class="cite">&#x005B;<a 
href="#Xburger2016digital">1</a>&#x005D;</span>. Thus, as we
mentioned above, compression systems such as <a 
href="https://en.wikipedia.org/wiki/JPEG" >JPEG</a> can <a 
href="https://en.wikipedia.org/wiki/Downsampling_(signal_processing)" >downsample</a> the chromas
&#x0028;usually by 2:1 in the horizontal and vertical directions&#x0029;, as well as increase their
quantization step sizes with respect to the luma, to achieve further <a 
href="https://en.wikipedia.org/wiki/Data_compression_ratio" >compression</a>
without noticeable visual distortion&#x00A0;<span class="cite">&#x005B;<a 
href="#Xmalvar2008lifting">2</a>&#x005D;</span>.
</p><!--l. 339--><p class="indent" >   As it can be seen, considering that the
<!--l. 339--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >RGB</mtext></mstyle></math> values ranges
between <!--l. 340--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn></math> and
<!--l. 340--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>2</mn><mn>5</mn><mn>5</mn></math> &#x0028;and rounding to the
nearest integer&#x0029;, <!--l. 341--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn> <mo 
class="MathClass-rel">&#x2264;</mo><mstyle 
class="text"><mtext  >Y</mtext></mstyle> <mo 
class="MathClass-rel">&#x2264;</mo> <mn>2</mn><mn>5</mn><mn>5</mn></math>,
<!--l. 341--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn> <mo 
class="MathClass-rel">&#x2264;</mo><mstyle 
class="text"><mtext  >Cr</mtext></mstyle> <mo 
class="MathClass-rel">&#x2264;</mo> <mn>2</mn><mn>5</mn><mn>5</mn></math> and
<!--l. 342--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn> <mo 
class="MathClass-rel">&#x2264;</mo><mstyle 
class="text"><mtext  >Cb</mtext></mstyle> <mo 
class="MathClass-rel">&#x2264;</mo> <mn>2</mn><mn>5</mn><mn>5</mn></math>,
                                                                  

                                                                  
and therefore, the number of bits that are necessary to represent each
<!--l. 343--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCrCb</mtext></mstyle></math>
component is 8 &#x0028;although we must use &#xFB02;oating point arithmetic to perform the
transform&#x0029;.
</p><!--l. 346--><p class="indent" >   Finally, notice that the <!--l. 346--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >YCrCb</mtext></mstyle></math>
transform is not orthogonal because the analysis &#xFB01;lters are
not independent. This can be seen in the Eq.&#x00A0;<a 
href="#x1-8001r6">6<!--tex4ht:ref: eq:alternative_YCrCb --></a>, where the
<!--l. 348--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Cr</mtext></mstyle></math> coe&#xFB03;cients depend
on the coe&#xFB03;cients of <!--l. 349--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Y</mtext></mstyle></math>,
and therefore, there is a dependency between both <a 
href="https://en.wikipedia.org/wiki/Basis_(linear_algebra)" >basis</a>, and something similar happens
for the <!--l. 352--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Cb</mtext></mstyle></math>
subband. This can be also easely checked:
<!--tex4ht:inline--></p><!--l. 353--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" >
    <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>2</mn><mn>9</mn><mn>9</mn> <mo 
class="MathClass-bin">&#x2217;</mo> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>5</mn> <mo 
class="MathClass-bin">+</mo> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>5</mn><mn>8</mn><mn>7</mn> <mo 
class="MathClass-bin">&#x2217;</mo> <mo 
class="MathClass-open" stretchy="false">&#x0028;</mo><mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>4</mn><mn>1</mn><mn>8</mn><mn>7</mn><mo 
class="MathClass-close" stretchy="false">&#x0029;</mo> <mo 
class="MathClass-bin">+</mo> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>1</mn><mn>1</mn><mn>4</mn> <mo 
class="MathClass-bin">&#x2217;</mo> <mo 
class="MathClass-open" stretchy="false">&#x0028;</mo><mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>0</mn><mn>8</mn><mn>1</mn><mn>3</mn><mo 
class="MathClass-close" stretchy="false">&#x0029;</mo> <mo 
class="MathClass-rel">=</mo> <mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>1</mn><mn>0</mn><mn>5</mn><mn>5</mn><mn>4</mn><mn>5</mn><mn>1</mn><mo 
class="MathClass-rel">&#x2260;</mo><mn>0</mn><mo 
class="MathClass-punc">,</mo>
</math>
<!--l. 354--><p class="nopar" >
<!--tex4ht:inline--></p><!--l. 354--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" >
  <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>2</mn><mn>9</mn><mn>9</mn> <mo 
class="MathClass-bin">&#x2217;</mo> <mo 
class="MathClass-open" stretchy="false">&#x0028;</mo><mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>1</mn><mn>6</mn><mn>8</mn><mn>7</mn><mo 
class="MathClass-close" stretchy="false">&#x0029;</mo> <mo 
class="MathClass-bin">+</mo> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>5</mn><mn>8</mn><mn>7</mn> <mo 
class="MathClass-bin">&#x2217;</mo> <mo 
class="MathClass-open" stretchy="false">&#x0028;</mo><mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>3</mn><mn>3</mn><mn>1</mn><mn>3</mn><mo 
class="MathClass-close" stretchy="false">&#x0029;</mo> <mo 
class="MathClass-bin">+</mo> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>1</mn><mn>1</mn><mn>4</mn> <mo 
class="MathClass-bin">&#x2217;</mo> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>5</mn> <mo 
class="MathClass-rel">=</mo> <mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>1</mn><mn>8</mn><mn>7</mn><mn>9</mn><mn>1</mn><mn>4</mn><mn>4</mn><mo 
class="MathClass-rel">&#x2260;</mo><mn>0</mn><mo 
class="MathClass-punc">,</mo><mi 
>&#x00A0;</mi><mstyle mathvariant="normal"><mi 
>a</mi><mi 
>n</mi><mi 
>d</mi></mstyle>
</math>
<!--l. 356--><p class="nopar" >
                                                                  

                                                                  
<!--tex4ht:inline--></p><!--l. 356--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" >
  <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>5</mn> <mo 
class="MathClass-bin">&#x2217;</mo> <mo 
class="MathClass-open" stretchy="false">&#x0028;</mo><mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>1</mn><mn>6</mn><mn>8</mn><mn>7</mn><mo 
class="MathClass-close" stretchy="false">&#x0029;</mo> <mo 
class="MathClass-bin">+</mo> <mo 
class="MathClass-open" stretchy="false">&#x0028;</mo><mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>4</mn><mn>1</mn><mn>8</mn><mn>7</mn><mo 
class="MathClass-close" stretchy="false">&#x0029;</mo> <mo 
class="MathClass-bin">&#x2217;</mo> <mo 
class="MathClass-open" stretchy="false">&#x0028;</mo><mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>3</mn><mn>3</mn><mn>1</mn><mn>3</mn><mo 
class="MathClass-close" stretchy="false">&#x0029;</mo> <mo 
class="MathClass-bin">+</mo> <mo 
class="MathClass-open" stretchy="false">&#x0028;</mo><mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>0</mn><mn>8</mn><mn>1</mn><mn>3</mn><mo 
class="MathClass-close" stretchy="false">&#x0029;</mo> <mo 
class="MathClass-bin">&#x2217;</mo> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>5</mn> <mo 
class="MathClass-rel">=</mo> <mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>0</mn><mn>1</mn><mn>3</mn><mn>7</mn><mn>1</mn><mn>5</mn><mn>3</mn><mn>1</mn><mo 
class="MathClass-rel">&#x2260;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo>
</math>
<!--l. 357--><p class="nopar" >
</p><!--l. 359--><p class="indent" >   The inverse &#x0028;synthesis&#x0029; transform is de&#xFB01;ned by
</p><table class="equation"><tr><td>
<!--l. 382--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-8003r8"  class="label" ></mstyle><!--endlabel--><mo 
class="MathClass-open" stretchy="false"> <mtable  align="axis" style=""  
equalrows="false" columnlines="none none" equalcolumns="false" class="array"> <mtr><mtd 
class="array"  columnalign="left">  <mstyle 
class="text"><mtext  >R</mtext></mstyle>  </mtd><mtd 
class="array"  columnalign="center">  = </mtd><mtd 
class="array"  columnalign="left"> <mstyle 
class="text"><mtext  >Y</mtext></mstyle> + 1.403&#x0028;<mstyle 
class="text"><mtext  >Cr</mtext></mstyle> &#x2212; &#x03B4;&#x0029;                       </mtd>
</mtr>  <mtr><mtd 
class="array"  columnalign="left">  <mstyle 
class="text"><mtext  >G</mtext></mstyle>  </mtd><mtd 
class="array"  columnalign="center">  = </mtd><mtd 
class="array"  columnalign="left"> <mstyle 
class="text"><mtext  >Y</mtext></mstyle> &#x2212; 0.714&#x0028;<mstyle 
class="text"><mtext  >Cr</mtext></mstyle> &#x2212; &#x03B4;&#x0029; &#x2212; 0.344&#x0028;<mstyle 
class="text"><mtext  >Cb</mtext></mstyle> &#x2212; &#x03B4;&#x0029; </mtd>
</mtr>  <mtr><mtd 
class="array"  columnalign="left">  <mstyle 
class="text"><mtext  >B</mtext></mstyle>  </mtd><mtd 
class="array"  columnalign="center">  = </mtd><mtd 
class="array"  columnalign="left"> <mstyle 
class="text"><mtext  >Y</mtext></mstyle> + 1.773&#x0028;<mstyle 
class="text"><mtext  >Cb</mtext></mstyle> &#x2212; &#x03B4;&#x0029;.                   </mtd></mtr><!--lcl--></mtable></mo>
</math></td><td class="eq-no">&#x0028;8&#x0029;</td></tr></table>
<!--l. 390--><p class="indent" >   that in matrix form is </p><table class="equation"><tr><td>
<!--l. 391--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-8004r9"  class="label" ></mstyle><!--endlabel--><mo 
class="MathClass-open" stretchy="false"> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >R</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >G</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >B</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable></mo>                                                            </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-rel">=</mo>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center"> <mn>1</mn> </mtd><mtd 
class="array"  columnalign="center">   <mn>1</mn><mo 
class="MathClass-punc">.</mo><mn>4</mn><mn>0</mn><mn>3</mn>   </mtd><mtd 
class="array"  columnalign="center">     <mn>0</mn>     </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mn>1</mn> </mtd> <mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>7</mn><mn>1</mn><mn>4</mn> </mtd> <mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mn>0</mn><mo 
class="MathClass-punc">.</mo><mn>3</mn><mn>4</mn><mn>4</mn></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center"> <mn>1</mn> </mtd><mtd 
class="array"  columnalign="center">     <mn>0</mn>     </mtd><mtd 
class="array"  columnalign="center">   <mn>1</mn><mo 
class="MathClass-punc">.</mo><mn>7</mn><mn>7</mn><mn>3</mn>   </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                        </mrow><mo fence="true" form="postfix">]</mo></mrow> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center">     <mstyle 
class="text"><mtext  >Y</mtext></mstyle>     </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >Cr</mtext></mstyle> <mo 
class="MathClass-bin">&#x2212;</mo> <mi 
>&#x03B4;</mi></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >Cb</mtext></mstyle> <mo 
class="MathClass-bin">&#x2212;</mo> <mi 
>&#x03B4;</mi> </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                           </mrow><mo fence="true" form="postfix">]</mo></mrow><mo 
class="MathClass-punc">,</mo>
</math></td><td class="eq-no">&#x0028;9&#x0029;</td></tr></table>
                                                                  

                                                                  
<!--l. 411--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.1.1   </span> <a 
 id="x1-90002.1.1"></a>Quantization in the YCrCb domain</h5>
<!--l. 412--><p class="noindent" >The YCrCb transform is not orthogonal and the relative synthesis &#xFB01;lters gains
depends on the energy of the inversely transformed components. In this case, we can
estimate the distortion generated by the quantization of a color subband, always
measured in the RGB domain, if the rest of subbands are unquantized. This can be
the algorithm:
     </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-9002x1">
     <!--l. 419--><p class="noindent" >Variying the <!--l. 419--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi mathvariant="normal">&#x0394;</mi></math>,
     estimate the RD curve for each YCrCb subband, keeping the other subbands
     unquantized. The distortion must be measures in the RGB domain.
     </p></li>
<li 
  class="enumerate" id="x1-9004x2">
     <!--l. 422--><p class="noindent" >Sort the RD points by their slope.
     </p></li>
<li 
  class="enumerate" id="x1-9006x3">
     <!--l. 423--><p class="noindent" >Apply progressively the combinations quantization steps. The distortion
     can be measure in both, the color-DCT and the RGB domains.</p></li></ol>
<!--l. 427--><p class="noindent" >See this <a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/study_guide/06-color_transform/YCrCb_compression.ipynb" >notebook</a>.
</p><!--l. 429--><p class="indent" >   Notice that the only alternative to this &#x201C;fast&#x201D; rate-control algorithm is to perform
a brute-force search of quantization steps combinations.
</p><!--l. 598--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">2.2   </span> <a 
 id="x1-100002.2"></a>The <!--l. 598--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >RGB</mtext></mstyle> <mo 
class="MathClass-rel">&#x21D4;</mo><mstyle 
class="text"><mtext  >YCoCg</mtext></mstyle></math>
transform</h4>
<!--l. 600--><p class="noindent" >Clearly, orthogonality is a desired property in lossy compression systems because it helps
to isolate<span class="footnote-mark"><a 
href="index7.html#fn6x0"><sup class="textsuperscript">6</sup></a></span><a 
 id="x1-10001f6"></a> 
the impact &#x0028;in the case of a color transform&#x0029; of each color subband on the quality of
the reconstruction of the image, simplifying signi&#xFB01;cantly the determination of the
pattern of QSs that generate the optimal RD curve.
</p><!--l. 607--><p class="indent" >   Moreover, Eqs.&#x00A0;<span 
class="ecbx-1000">??</span> and <a 
href="#x1-8003r8">8<!--tex4ht:ref: eq:iYCrCb --></a> were derived by <a 
href="https://en.wikipedia.org/wiki/Principal_component_analysis" >Principal Component Analysis &#x0028;PCA&#x0029;</a> on
                                                                  

                                                                  
old<span class="footnote-mark"><a 
href="index8.html#fn7x0"><sup class="textsuperscript">7</sup></a></span><a 
 id="x1-10002f7"></a> 
video data. The same procedure has been carried out with
newer<span class="footnote-mark"><a 
href="index9.html#fn8x0"><sup class="textsuperscript">8</sup></a></span><a 
 id="x1-10003f8"></a> 
images, obtaining </p><table class="equation"><tr><td>
<!--l. 613--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-10004r10"  class="label" ></mstyle><!--endlabel--><mo 
class="MathClass-open" stretchy="false"> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >Y</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"><msub><mrow 
> <mstyle 
class="text"><mtext  >C</mtext></mstyle> </mrow><mrow 
>
1</mrow></msub 
>  </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center"><msub><mrow 
>  <mstyle 
class="text"><mtext  >C</mtext></mstyle></mrow><mrow 
>2</mrow></msub 
>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable></mo>                                                            </mrow><mo fence="true" form="postfix">]</mo></mrow>  <mo 
class="MathClass-rel">=</mo>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center">   <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>3</mn></mrow></mfrac>    </mtd><mtd 
class="array"  columnalign="center">  <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>3</mn></mrow></mfrac>  </mtd><mtd 
class="array"  columnalign="center">    <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>3</mn></mrow></mfrac>    </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center">    <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>2</mn></mrow></mfrac>    </mtd><mtd 
class="array"  columnalign="center">  <mn>0</mn>  </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><mn>2</mn></mrow></mfrac>  </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center">  <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><mn>4</mn></mrow></mfrac>  </mtd><mtd 
class="array"  columnalign="center">  <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>2</mn></mrow></mfrac>  </mtd><mtd 
class="array"  columnalign="center">  <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><mn>4</mn></mrow></mfrac>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                                    </mrow><mo fence="true" form="postfix">]</mo></mrow>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"> <mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >R</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >G</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >B</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                               </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-rel">&#x21D4;</mo> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >R</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >G</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >B</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                               </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-rel">=</mo>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center"> <mn>1</mn> </mtd><mtd 
class="array"  columnalign="center">   <mn>1</mn>   </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>2</mn></mrow>
<mrow 
><mn>3</mn></mrow></mfrac>  </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center">  <mn>1</mn> </mtd><mtd 
class="array"  columnalign="center">   <mn>0</mn>   </mtd><mtd 
class="array"  columnalign="center">   <mfrac><mrow 
><mn>4</mn></mrow> 
<mrow 
><mn>3</mn></mrow></mfrac>    </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center">  <mn>1</mn> </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mn>1</mn> </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>2</mn></mrow>
<mrow 
><mn>3</mn></mrow></mfrac>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                                     </mrow><mo fence="true" form="postfix">]</mo></mrow>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"> <mtr><mtd 
class="array"  columnalign="center">   <mstyle 
class="text"><mtext  >Y</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"><msub><mrow 
> <mstyle 
class="text"><mtext  >C</mtext></mstyle> </mrow><mrow 
>
<mn>1</mn></mrow></msub 
>  </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center"><msub><mrow 
>  <mstyle 
class="text"><mtext  >C</mtext></mstyle></mrow><mrow 
><mn>2</mn></mrow></msub 
>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                                                    </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-punc">.</mo>
</math></td><td class="eq-no">&#x0028;10&#x0029;</td></tr></table>
<!--l. 652--><p class="indent" >   The <a 
href="https://en.wikipedia.org/wiki/YCoCg" >YCoCg</a> color transform is orthogonal and the synthesis &#xFB01;lters
gains<span class="footnote-mark"><a 
href="index10.html#fn9x0"><sup class="textsuperscript">9</sup></a></span><a 
 id="x1-10005f9"></a>  are
22/9 &#x0028;for <!--l. 656--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Y</mtext></mstyle></math>&#x0029;,
25/9 &#x0028;for <!--l. 656--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle 
class="text"><mtext  >C</mtext></mstyle></mrow><mrow 
><mn>1</mn></mrow></msub 
></math>&#x0029; and
22/9 &#x0028;for <!--l. 656--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><msub><mrow 
><mstyle 
class="text"><mtext  >C</mtext></mstyle></mrow><mrow 
><mn>2</mn></mrow></msub 
></math>&#x0029;.
</p><!--l. 658--><p class="indent" >   Unfortunately, from a perceptual perspective we must impose &#x0028;thinking of the
subsampling of the chromas&#x0029; some features in a color transform &#x0028;such as the in&#xFB02;uence
of the green channel on the luma channel should be high&#x0029; that violates the
orthogonality constrain <span class="cite">&#x005B;<a 
href="#Xmalvar2008lifting">2</a>&#x005D;</span>. For this reason the authors &#xFB01;nally propose the transform
</p><table class="equation"><tr><td>
                                                                  

                                                                  
<!--l. 664--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
<mstyle 
   id="x1-10006r11"  class="label" ></mstyle><!--endlabel--><mo 
class="MathClass-open" stretchy="false"> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >Y</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >Co</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >Cg</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable></mo>                                                           </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-rel">=</mo>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center">   <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>4</mn></mrow></mfrac>    </mtd><mtd 
class="array"  columnalign="center">  <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>2</mn></mrow></mfrac>  </mtd><mtd 
class="array"  columnalign="center">    <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>4</mn></mrow></mfrac>    </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center">    <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>2</mn></mrow></mfrac>    </mtd><mtd 
class="array"  columnalign="center">  <mn>0</mn>  </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><mn>2</mn></mrow></mfrac>  </mtd>
</mtr> <mtr><mtd 
class="array"  columnalign="center">  <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><mn>4</mn></mrow></mfrac>  </mtd><mtd 
class="array"  columnalign="center">  <mfrac><mrow 
><mn>1</mn></mrow> 
<mrow 
><mn>2</mn></mrow></mfrac>  </mtd><mtd 
class="array"  columnalign="center">  <mo 
class="MathClass-bin">&#x2212;</mo><mfrac><mrow 
><mn>1</mn></mrow>
<mrow 
><mn>4</mn></mrow></mfrac>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                                    </mrow><mo fence="true" form="postfix">]</mo></mrow>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"> <mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >R</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >G</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >B</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                               </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-rel">&#x21D4;</mo> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >R</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >G</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >B</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                               </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-rel">=</mo>  <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center"> <mn>1</mn> </mtd><mtd 
class="array"  columnalign="center">   <mn>1</mn>   </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mn>1</mn> </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mn>1</mn> </mtd> <mtd 
class="array"  columnalign="center"> <mn>0</mn> </mtd> <mtd 
class="array"  columnalign="center"> <mn>1</mn></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center"> <mn>1</mn> </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mn>1</mn> </mtd><mtd 
class="array"  columnalign="center"> <mo 
class="MathClass-bin">&#x2212;</mo><mn>1</mn> </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                  </mrow><mo fence="true" form="postfix">]</mo></mrow> <mrow><mo fence="true" form="prefix"> [</mo><mrow><mtable  align="axis" style=""  
equalrows="false" columnlines="none none none none none none none none none" equalcolumns="false" class="array"><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >Y</mtext></mstyle>  </mtd></mtr> <mtr><mtd 
class="array"  columnalign="center"> <mstyle 
class="text"><mtext  >Co</mtext></mstyle></mtd>
</mtr><mtr><mtd 
class="array"  columnalign="center">  <mstyle 
class="text"><mtext  >Cg</mtext></mstyle>  </mtd></mtr> <!--*\c@MaxMatrixCols c--></mtable>                                                                                              </mrow><mo fence="true" form="postfix">]</mo></mrow> <mo 
class="MathClass-punc">,</mo>
</math></td><td class="eq-no">&#x0028;11&#x0029;</td></tr></table>
<!--l. 701--><p class="indent" >   that is near orthogonal<span class="footnote-mark"><a 
href="index11.html#fn10x0"><sup class="textsuperscript">10</sup></a></span><a 
 id="x1-10007f10"></a> ,
and has channel gains 3 &#x0028;<!--l. 703--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Y</mtext></mstyle></math>&#x0029;,
2 &#x0028;<!--l. 704--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Co</mtext></mstyle></math>&#x0029; and
3 &#x0028;<!--l. 704--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >Cg</mtext></mstyle></math>&#x0029;.
</p><!--l. 706--><p class="indent" >   Again, notice that if the <!--l. 706--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mstyle 
class="text"><mtext  >RGB</mtext></mstyle></math>
values ranges between <!--l. 706--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn></math>
and <!--l. 707--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>2</mn><mn>5</mn><mn>5</mn></math> &#x0028;and rounding to
the nearest integer&#x0029;, <!--l. 707--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>0</mn> <mo 
class="MathClass-rel">&#x2264;</mo><mstyle 
class="text"><mtext  >Y</mtext></mstyle> <mo 
class="MathClass-rel">&#x2264;</mo> <mn>2</mn><mn>5</mn><mn>5</mn></math>,
<!--l. 708--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-bin">&#x2212;</mo> <mn>1</mn><mn>2</mn><mn>8</mn> <mo 
class="MathClass-rel">&#x2264;</mo><mstyle 
class="text"><mtext  >Co</mtext></mstyle> <mo 
class="MathClass-rel">&#x2264;</mo> <mn>1</mn><mn>2</mn><mn>7</mn></math> and
<!--l. 708--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" > <mo 
class="MathClass-bin">&#x2212;</mo> <mn>1</mn><mn>2</mn><mn>8</mn> <mo 
class="MathClass-rel">&#x2264;</mo><mstyle 
class="text"><mtext  >Cg</mtext></mstyle> <mo 
class="MathClass-rel">&#x2264;</mo> <mn>1</mn><mn>2</mn><mn>7</mn></math>, and
therefore, the number of bits that are necessary to represent each component is
<!--l. 710--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mn>8</mn></math>.
Therefore, we can use the same QS range for each component. See this <a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/06-YUV_compression/YCrCb_matrix.ipynb" >notebook</a>.
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.2.1   </span> <a 
 id="x1-110002.2.1"></a>Quantization in the YCoCg domain</h5>
<!--l. 714--><p class="noindent" >Again, like in the color-DCT, ignoring the possible e&#xFB00;ects of the entropy encoding
stage &#x0028;that could compress more some color subbands&#x0029;, the previous gains suggest to
use </p><table class="equation"><tr><td>
<!--l. 717--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="block" class="equation">
                        <mstyle 
   id="x1-11001r12"  class="label" ></mstyle><!--endlabel--><mo 
class="MathClass-open" stretchy="false"><mfrac><mrow 
>3</mrow>
<mrow 
>2</mrow></mfrac></mo><msub><mrow 
><mi mathvariant="normal">&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >Y</mtext></mstyle></mrow></msub 
> <mo 
class="MathClass-rel">=</mo><msub><mrow 
> <mi mathvariant="normal">&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >Co</mtext></mstyle></mrow></msub 
> <mo 
class="MathClass-rel">=</mo> <mfrac><mrow 
><mn>3</mn></mrow> 
<mrow 
><mn>2</mn></mrow></mfrac><msub><mrow 
><mi mathvariant="normal">&#x0394;</mi></mrow><mrow 
><mstyle 
class="text"><mtext  >Cg</mtext></mstyle></mrow></msub 
><mo 
class="MathClass-punc">.</mo>
</math></td><td class="eq-no">&#x0028;12&#x0029;</td></tr></table>
<!--l. 720--><p class="indent" >   See this <a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/milestones/06-YUV_compression/YCrCb_matrix.ipynb" >notebook</a>.
</p><!--l. 722--><p class="indent" >   If the RD slope of each point depends also on the performance of DEFLATE
&#x0028;something that is normal&#x0029;, we can &#xFB01;nd the optimal RD curve with the
algorithm:
                                                                  

                                                                  
     </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-11003x1">
     <!--l. 724--><p class="noindent" >Varilling the <!--l. 724--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi mathvariant="normal">&#x0394;</mi></math>,
     estimate &#x0028;remember that YCoCg is only near-orthonal&#x0029;, the RD curve
     of each YCoCg subband can de found &#x0028;without considering the rest of
     subbands&#x0029;.
     </p></li>
<li 
  class="enumerate" id="x1-11005x2">
     <!--l. 725--><p class="noindent" >Sort the RD points by their slope.
     </p></li>
<li 
  class="enumerate" id="x1-11007x3">
     <!--l. 726--><p class="noindent" >Apply progressively the combinations of quantization steps. Measure the
     distortion in the RGB domain &#x0028;in the transform domain could be only
     estimated&#x0029;.</p></li></ol>
<!--l. 731--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">3   </span> <a 
 id="x1-120003"></a>What do I have to do?</h3>
<!--l. 733--><p class="noindent" >
     </p><ol  class="enumerate1" >
<li 
  class="enumerate" id="x1-12002x1">
     <!--l. 734--><p class="noindent" >Please,  run  the  previous  <a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/study_guide/06-color_transform/performance.ipynb" >notebook</a>  to  learn  some  insights  about  the
     problem of the optimal quantization in the color domain.
     </p></li>
<li 
  class="enumerate" id="x1-12004x2">
     <!--l. 738--><p class="noindent" >Include  in  the  previous  <a 
href="https://github.com/Sistemas-Multimedia/Sistemas-Multimedia.github.io/blob/master/study_guide/06-color_transform/performance.ipynb" >notebook</a>  an  implementation  of  the  <a 
href="https://en.wikipedia.org/wiki/JPEG_2000#Color_components_transformation" >RCT
     &#x0028;Reversible Color Transform&#x0029;</a> and compare it&#x2019;s RD performance with the
     other transforms.
     </p></li>
<li 
  class="enumerate" id="x1-12006x3">
     <!--l. 744--><p class="noindent" >Implement the transform described in Eq.&#x00A0;<a 
href="#x1-10004r10">10<!--tex4ht:ref: eq:optimal --></a>, and compare it with the
     other transforms.</p></li></ol>
                                                                  

                                                                  
<!--l. 748--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">3.1   </span> <a 
 id="x1-130003.1"></a>Rate-control</h4>
<!--l. 750--><p class="noindent" >When the transform is orthogonal, the quantization step of a subband should be
inversely proportional to the subband gain.
</p><!--l. 753--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">4   </span> <a 
 id="x1-140004"></a>Timming</h3>
<!--l. 755--><p class="noindent" >Please, &#xFB01;nish this milestone before the next class session.
</p><!--l. 757--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">5   </span> <a 
 id="x1-150005"></a>Deliverables</h3>
<!--l. 759--><p class="noindent" >None.
</p><!--l. 761--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">6   </span> <a 
 id="x1-160006"></a>Resources</h3>
   <div class="thebibliography">
   <p class="bibitem" ><span class="biblabel">
 &#x005B;1&#x005D;<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xburger2016digital"></a>W.&#x00A0;Burger and M.J. Burge.  <a 
href="https://educons.edu.rs/wp-content/uploads/2020/05/2016-Digital-Image-Processing.pdf" ><span 
class="ecti-1000">Digital Image Processing: An Algorithmic</span>
   <span 
class="ecti-1000">Introduction Using Java</span></a>. Springer, 2016.
   </p>
   <p class="bibitem" ><span class="biblabel">
 &#x005B;2&#x005D;<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xmalvar2008lifting"></a>H.S. Malvar, G.J. Sullivan, and S.&#x00A0;Srinivasan.  <a 
href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/2008_ColorTransforms_MalvarSullivanSrinivasan.pdf" >Lifting-based reversible
   color  transformations  for  image  compression</a>.   In  <span 
class="ecti-1000">Applications of Digital</span>
   <span 
class="ecti-1000">Image  Processing  XXXI</span>,  volume  7073,  pages  707307&#x2013;1  &#x2013;  707307&#x2013;10.
   International Society for Optics and Photonics, 2008.
   </p>
   <p class="bibitem" ><span class="biblabel">
 &#x005B;3&#x005D;<span class="bibsp">&#x00A0;&#x00A0;&#x00A0;</span></span><a 
 id="Xsayood2017introduction"></a>K.&#x00A0;Sayood.    <a 
href="http://rahilshaikh.weebly.com/uploads/1/1/6/3/11635894/data_compression.pdf" ><span 
class="ecti-1000">Introduction  to  Data  Compression</span></a>  <a 
href="https://people.cs.nctu.edu.tw/~cmliu/Courses/Compression/" ><span 
class="ecti-1000">&#x0028;Slides&#x0029;</span></a>.    Morgan
   Kaufmann, 2017.
</p>
   </div>
    
</body></html> 

                                                                  


